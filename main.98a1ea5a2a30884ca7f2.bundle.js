(()=>{"use strict";var e,t={36:(e,t,s)=>{var a=s(260),i=s.n(a);class r extends i().Scene{constructor(){super("preloader")}preload(){const{width:e,height:t}=this.scale,s=this.add.graphics(),a=this.add.text(.5*e,.45*t,"0%",{fontFamily:"AkzidenzGrotesk",fontSize:"36px",color:"#f2a63b"}).setOrigin();this.load.on("progress",(i=>{s.clear(),s.fillStyle(15902267,1),s.fillRect(0,.5*t,e*i,30),a.setText(Math.round(100*i).toString()+"%")})),this.load.on("complete",(()=>{s.destroy(),console.log("Loading complete")})),this.load.spritesheet("ball","assets/textures/balls-atlas.png",{frameWidth:210,frameHeight:210}),this.load.spritesheet("basket","assets/textures/basket-sheet.png",{frameWidth:354,frameHeight:56.5}),this.load.spritesheet("help","assets/textures/help-sheet.png",{frameWidth:215,frameHeight:1960/6}),this.load.image("net","assets/textures/net.png"),this.load.image("title","assets/textures/title.png"),this.load.image("star","assets/textures/star.png"),this.load.image("mini-wall","assets/textures/miniwall.png"),this.load.image("item","assets/textures/item.png"),this.load.image("reset-btn","assets/textures/btnreset.png"),this.load.image("settings-btn","assets/textures/btnsettings.png"),this.load.image("settings-mainmenu-btn","assets/textures/btnsettings-mainmenu.png"),this.load.image("settings-pause-btn","assets/textures/btnsettings-pause.png"),this.load.image("share-btn","assets/textures/btnshare.png"),this.load.image("pause-btn","assets/textures/btnpause.png"),this.load.image("resume-btn","assets/textures/btnresume.png"),this.load.image("mainmenu-btn","assets/textures/btnmainmenu.png"),this.load.image("customize-mainmenu-btn","assets/textures/btncustomize-mainmenu.png"),this.load.image("customize-btn","assets/textures/btncustomize.png"),this.load.image("back-btn","assets/textures/btnback.png"),this.load.image("cleardata-btn","assets/textures/btncleardata.png"),this.load.spritesheet("rounded-btn","assets/textures/btnrounded-sheet.png",{frameHeight:122,frameWidth:224}),this.load.image("e3","assets/textures/e3.png"),this.load.image("e4","assets/textures/e4.png"),this.load.image("circle","assets/textures/circle.png"),this.load.image("shape1","assets/textures/shapes/shape1.png"),this.load.image("shape2","assets/textures/shapes/shape2.png"),this.load.image("shape3","assets/textures/shapes/shape3.png"),this.load.bitmapFont("objet","assets/fonts/objet-extrabold.png","assets/fonts/objet-extrabold.xml"),this.loadAudio()}create(){this.scene.start("game").launch("result").launch("main-menu")}loadAudio(){for(let e=1;e<=10;e++)this.load.audio(e.toString(),`assets/audios/notes/${e}.mp3`);this.load.audio("star","assets/audios/star.mp3"),this.load.audio("wall-hit","assets/audios/wall-hit.mp3"),this.load.audio("combo-start","assets/audios/combo-start.mp3"),this.load.audio("combo-shoot","assets/audios/combo-shoot.mp3"),this.load.audio("combo-hit","assets/audios/combo-hit.mp3"),this.load.audio("shoot","assets/audios/shoot.ogg"),this.load.audio("kick","assets/audios/kick.ogg"),this.load.audio("die","assets/audios/die.ogg")}}const o=600,h=1e3;class n{static Float(e,t){return Math.random()*(t-e)+e}static Int(e,t){return Math.floor(Math.random()*(t-e+1)+e)}static Percent(e){return this.Float(0,100)<=e}}var c,l;!function(e){e.READY="ready",e.PLAYING="playing",e.GAME_OVER="game_over",e.PAUSE="pause",e.CUSTOMIZE="customize",e.SETTINGS="settings"}(c||(c={}));class u{static setString(e,t){try{localStorage.setItem(e,t)}catch(t){console.error(`Error saving ${e}:`,t)}}static getString(e){try{const t=localStorage.getItem(e);if(null!==t)return t}catch(t){console.error(`Error load ${e}:`,t)}return"0"}static setNumber(e,t){try{localStorage.setItem(e,t.toString())}catch(t){console.error(`Error saving ${e}:`,t)}}static getInt(e){try{const t=localStorage.getItem(e);if(null!==t)return parseInt(t)}catch(t){console.error(`Error load ${e}:`,t)}return 0}static getFloat(e){try{const t=localStorage.getItem(e);if(null!==t)return parseFloat(t)}catch(t){console.error(`Error load ${e}:`,t)}return 0}static setArray(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error("Error saving array:",e)}}static getArray(e){try{const t=localStorage.getItem(e);if(null!==t)return JSON.parse(t)}catch(e){console.error("Error retrieving array:",e)}return[]}static deleteAll(){localStorage.clear()}}!function(e){e.STAR="star",e.HIGH_SCORE="high_score",e.CURRENT_SKIN="current-skin",e.SKINS="skins",e.UNLOCKED_SKIN="unlocked-skins",e.SOUND="sound",e.VIBRATION="vibration",e.NIGHT_MODE="night-mode"}(l||(l={}));class p{static init(){this.emitter=new Phaser.Events.EventEmitter}static updateGameState(e,t){switch(this.previousState=this.currentState,this.currentState=e,this.currentState){case c.READY:this.handleReadyState(t);break;case c.PLAYING:this.handlePlayingState(t);break;case c.GAME_OVER:this.handleGameOverState(t);break;case c.PAUSE:this.handlePauseState(t);break;case c.CUSTOMIZE:this.handleCustomizeState(t);break;case c.SETTINGS:this.handleSettingsState(t)}this.emitter.emit("game-state-changed",this.currentState)}static handleReadyState(e){e.scene.start("result").launch("game").launch("main-menu")}static handlePlayingState(e){this.previousState===c.PAUSE&&e.scene.stop().resume("game").wake("main-menu")}static handleGameOverState(e){this.previousState===c.SETTINGS&&e.scene.stop().wake("result")}static handlePauseState(e){this.previousState===c.CUSTOMIZE||this.previousState===c.SETTINGS?e.scene.stop().wake("pause"):this.previousState===c.PLAYING&&e.scene.sleep().pause("game").launch("pause")}static handleCustomizeState(e){this.previousState===c.READY?e.scene.stop("game").stop("result").start("customize"):this.previousState===c.PAUSE&&e.scene.sleep().launch("customize")}static handleSettingsState(e){this.previousState===c.GAME_OVER?e.scene.launch("settings").sleep("result"):this.previousState===c.READY?e.scene.stop("game").stop("result").start("settings"):this.previousState===c.PAUSE&&e.scene.launch("settings").sleep("pause")}static getCurrentState(){return this.currentState}static getPreviousState(){return this.previousState}}p.currentState=c.READY,p.previousState=c.READY;class d{constructor(e){d.curStar=u.getInt(l.STAR),d.curStarText=e.add.bitmapText(528,50,"objet",u.getString(l.STAR),36).setTint(16485157).setDepth(-3).setOrigin(0,.5),e.physics.add.sprite(498,50,"star").setScale(.3)}static updateStar(e){this.curStar=e,p.getPreviousState()!==c.PAUSE&&p.getCurrentState()!==c.PLAYING||this.curStarText.setText(e.toString()),u.setNumber(l.STAR,e)}static increaseStar(){this.updateStar(this.curStar+1)}static getCurrentStar(){return this.curStar}}class m extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,"star"),this.isActive=!0,e.ball&&(this.ball=e.ball,this.scene.physics.add.existing(this),this.scene.physics.add.overlap(this.ball,this,(()=>{this.isActive&&(this.isActive=!1,this.scene.starSound.play(),d.increaseStar(),this.scene.add.tween({targets:this,scale:{value:0},duration:300,ease:"Back.in",onComplete:()=>{this.scale=.3,this.alpha=0}}))})))}}const g=[[0,50],[65,-10],[-65,-10],[45,25],[-45,25]],x=1800;class S extends Phaser.GameObjects.Container{constructor(e,t,s,a){super(e,t,s),this.otherCirc=[],this.hasBall=!1,this.shootVelocity=new Phaser.Math.Vector2(0,0),this.emitter=new Phaser.Events.EventEmitter,this.ball=a,this.createBasketObjects(e),this.registerOverlapEvent(e),this.registerDragEvents(e),this.isAvaliable=!0}createBasketObjects(e){this.basketTopSprite=e.add.sprite(this.x,this.y,"basket",0).setScale(.4).setOrigin(.5,1.5).setDepth(-3),this.basketBottomSprite=e.add.sprite(0,0,"basket",1).setScale(.4),this.basketEffectSprite=e.add.sprite(0,0,"e3").setScale(.4).setAlpha(0),this.netSprite=e.add.sprite(0,0,"net").setScale(.4).setOrigin(.5,0),this.centerCirc=e.physics.add.sprite(0,15,"").setCircle(20).setOffset(-4,-4).setAlpha(0);for(let t=0;t<5;t++)this.otherCirc[t]=e.physics.add.sprite(g[t][0],g[t][1],"").setCircle(6).setOffset(10,10).setAlpha(0),this.add(this.otherCirc[t]),e.physics.add.existing(this.otherCirc[t]),this.otherCirc[t].body.setImmovable(!0).setBounce(0).moves=!1,1===t||2===t?e.physics.add.collider(this.otherCirc[t],this.ball,(()=>{this.hasBall||this.ball.resetCombo()})):e.physics.add.collider(this.otherCirc[t],this.ball);this.add(this.netSprite),this.add(this.basketBottomSprite),this.add(this.centerCirc),this.add(this.basketEffectSprite),e.physics.add.existing(this.centerCirc)}createStar(e){this.star||(this.star=new m({scene:e,x:0,y:-70,ball:this.ball}).setScale(.3),this.add(this.star)),this.star.setAlpha(1),this.star.isActive=!0}setMoveable(e){this.moveTween&&this.moveTween.destroy();const t=this.x>300?n.Float(-300,-200):n.Float(200,300),s=n.Percent(50);this.moveTween=s?this.scene.add.tween({targets:this,x:this.x+t,ease:"Sine.easeInOut",duration:2e3,yoyo:!0,repeat:-1}):this.scene.add.tween({targets:this,y:this.y+t,ease:"Sine.easeInOut",duration:2e3,yoyo:!0,repeat:-1}),e?(s?this.scene.dotLine.drawLine(new Phaser.Math.Vector2(this.x,this.y),new Phaser.Math.Vector2(this.x+t,this.y),8):this.scene.dotLine.drawLine(new Phaser.Math.Vector2(this.x,this.y),new Phaser.Math.Vector2(this.x,this.y+t),8),this.moveTween.play()):this.moveTween.pause()}registerOverlapEvent(e){e.physics.add.overlap(this.centerCirc,this.ball,(()=>{!this.hasBall&&this.isAvaliable&&(this.isAvaliable=!1,this.hasBall=!0,this.ball.setBounce(0),this.emitter.emit("onHasBall",this),this.changeBasketTexture(1),this.animateBasketEffect(),this.setMoveable(!1))}))}registerDragEvents(e){e.input.on("dragstart",(e=>{this.hasBall&&(this.dragStartPos=new Phaser.Math.Vector2(e.x,e.y))})),e.input.on("drag",(t=>{this.hasBall&&this.dragStartPos&&(this.handleDragMovement(t),e.dotLine.drawTrajectoryLine(new Phaser.Math.Vector2(this.ball.x,this.ball.y),this.shootVelocity,2e3))})),e.input.on("dragend",(()=>{this.hasBall&&this.shootVelocity.length()>100&&(this.hasBall=!1,this.otherCirc[0].y=50,e.add.tween({targets:this.netSprite,scaleY:.4,duration:300,ease:"Back.out"}),this.ball.shoot(this.shootVelocity),e.dotLine.clearTrajectoryLine(),this.changeBasketTexture(0),this.scene.time.delayedCall(300,(()=>{this.isAvaliable=!0})))}))}handleDragMovement(e){this.ball.setGravityY(0),this.ball.setVelocity(0),this.dragPos=new Phaser.Math.Vector2(e.x,e.y),this.shootVelocity=new Phaser.Math.Vector2(7*(this.dragStartPos.x-this.dragPos.x),7*(this.dragStartPos.y-this.dragPos.y));const t=Math.min(this.shootVelocity.length(),x);this.shootVelocity=new Phaser.Math.Vector2(t*Math.cos(this.shootVelocity.angle()),t*Math.sin(this.shootVelocity.angle())),this.shootVelocity.length()>10&&(this.rotation=this.shootVelocity.angle()+Math.PI/2,this.netSprite.scaleY=t/x*.2+.4,this.otherCirc[0].y=t/x*20+50,this.ball.x=-Math.cos(this.shootVelocity.angle())*(t/x*20+13)+this.x,this.ball.y=-Math.sin(this.shootVelocity.angle())*(t/x*20+13)+this.y)}animateBasketEffect(){this.basketEffectSprite.setAlpha(1).setScale(.2),this.scene.add.tween({targets:this,rotation:{value:0,duration:300},ease:"Back.out"}),this.scene.add.tween({targets:this.basketEffectSprite,alpha:{value:0,duration:300},scale:{value:1,duration:300},ease:"Quad.out"}),this.scene.add.tween({targets:this.ball,x:{value:this.x,duration:200},y:{value:this.y+25,duration:100},ease:"Quad.out"}),this.scene.add.tween({targets:this.otherCirc[0],y:{value:this.otherCirc[0].y+15,duration:100,yoyo:!0},ease:"Quad.out"}),this.scene.add.tween({targets:this.netSprite,scaleY:{value:.5,duration:100},yoyo:!0,ease:"Quad.out"})}changeBasketTexture(e){this.basketTopSprite.setTexture("basket",2*e),this.basketBottomSprite.setTexture("basket",2*e+1)}update(){this.basketTopSprite.rotation=this.rotation,this.basketTopSprite.x=this.x,this.basketTopSprite.y=this.y,this.basketTopSprite.setScale(.4*this.scale)}}const b=[{texure:"shape1",frame:"0",colors:[16773923,16763395,16733187]},{texure:"shape1",frame:"0",colors:[16720241,16748731,16770215]},{texure:"shape1",frame:"0",colors:[16760335,16391694,9175040]},{texure:"shape1",frame:"0",colors:[16759739,16737205,11481700]},{texure:"shape1",frame:"0",colors:[16645888,10288942,3728717]},{texure:"shape1",frame:"0",colors:[16772020,16760745,16755884]},{texure:"shape2",frame:"0",colors:[16645888,10288942,3728717]},{texure:"shape3",frame:"0",colors:[16504530,15831223,13519295,10895045]},{texure:"shape1",frame:"0",colors:[16711680,3997696,0]},{texure:"shape3",frame:"0",colors:[15831223,13519295,10895045]},{texure:"shape1",frame:"0",colors:[16753097,16337042,15075685]},{texure:"shape3",frame:"0",colors:[16761600,15491338,10750524,7014472]},{texure:"shape1",frame:"0",colors:[16711680,9765121,3997696,0]},{texure:"shape3",frame:"0",colors:[16753920,16776960,32768,255,4915330]},{texure:"shape1",frame:"0",colors:[16710055,16433683,16219681]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16750529,16734296,14685260,10098275]},{texure:"shape1",frame:"0",colors:[3728717,5551157,3641911]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[16760335,16391694,9175040]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16710055,16433683,16219681]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16750529,16734296,14685260,10098275]},{texure:"shape1",frame:"0",colors:[3728717,5551157,3641911]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[16760335,16391694,9175040]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16710055,16433683,16219681]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16750529,16734296,14685260,10098275]},{texure:"shape1",frame:"0",colors:[3728717,5551157,3641911]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[16760335,16391694,9175040]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16710055,16433683,16219681]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16750529,16734296,14685260,10098275]},{texure:"shape1",frame:"0",colors:[3728717,5551157,3641911]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[16760335,16391694,9175040]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16710055,16433683,16219681]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16750529,16734296,14685260,10098275]},{texure:"shape1",frame:"0",colors:[3728717,5551157,3641911]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[16760335,16391694,9175040]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[16760335,16391694,9175040]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[16760335,16391694,9175040]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[3728717,6009624,2849291,1336150]},{texure:"shape1",frame:"0",colors:[16760335,16391694,9175040]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16772020,16760745,16755884]},{texure:"shape2",frame:"0",colors:[16645888,10288942,3728717]},{texure:"shape3",frame:"0",colors:[16504530,15831223,13519295,10895045]},{texure:"shape1",frame:"0",colors:[16711680,3997696,0]},{texure:"shape3",frame:"0",colors:[15831223,13519295,10895045]},{texure:"shape1",frame:"0",colors:[16753097,16337042,15075685]},{texure:"shape3",frame:"0",colors:[16761600,15491338,10750524,7014472]},{texure:"shape1",frame:"0",colors:[16711680,9765121,3997696,0]},{texure:"shape3",frame:"0",colors:[16753920,16776960,32768,255,4915330]},{texure:"shape1",frame:"0",colors:[16710055,16433683,16219681]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16750529,16734296,14685260,10098275]},{texure:"shape1",frame:"0",colors:[3728717,5551157,3641911]},{texure:"shape1",frame:"0",colors:[16772020,16760745,16755884]},{texure:"shape2",frame:"0",colors:[16645888,10288942,3728717]},{texure:"shape3",frame:"0",colors:[16504530,15831223,13519295,10895045]},{texure:"shape1",frame:"0",colors:[16711680,3997696,0]},{texure:"shape3",frame:"0",colors:[15831223,13519295,10895045]},{texure:"shape1",frame:"0",colors:[16753097,16337042,15075685]},{texure:"shape3",frame:"0",colors:[16761600,15491338,10750524,7014472]},{texure:"shape1",frame:"0",colors:[16711680,9765121,3997696,0]},{texure:"shape3",frame:"0",colors:[16753920,16776960,32768,255,4915330]},{texure:"shape1",frame:"0",colors:[16710055,16433683,16219681]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16750529,16734296,14685260,10098275]},{texure:"shape1",frame:"0",colors:[3728717,5551157,3641911]},{texure:"shape1",frame:"0",colors:[16772020,16760745,16755884]},{texure:"shape2",frame:"0",colors:[16645888,10288942,3728717]},{texure:"shape3",frame:"0",colors:[16504530,15831223,13519295,10895045]},{texure:"shape1",frame:"0",colors:[16711680,3997696,0]},{texure:"shape3",frame:"0",colors:[15831223,13519295,10895045]},{texure:"shape1",frame:"0",colors:[16753097,16337042,15075685]},{texure:"shape3",frame:"0",colors:[16761600,15491338,10750524,7014472]},{texure:"shape1",frame:"0",colors:[16711680,9765121,3997696,0]},{texure:"shape3",frame:"0",colors:[16753920,16776960,32768,255,4915330]},{texure:"shape1",frame:"0",colors:[16710055,16433683,16219681]},{texure:"shape1",frame:"0",colors:[5152573,1986856,1645081]},{texure:"shape1",frame:"0",colors:[16750529,16734296,14685260,10098275]},{texure:"shape1",frame:"0",colors:[3728717,5551157,3641911]}];class f{static init(){this.emitter=new Phaser.Events.EventEmitter,this.currentSkin=u.getInt(l.CURRENT_SKIN),this.unlockedSkins=u.getArray(l.UNLOCKED_SKIN),0===this.unlockedSkins.length&&(this.unlockedSkins=[0])}static unlockSkin(e){this.unlockedSkins.push(e),u.setArray(l.UNLOCKED_SKIN,this.unlockedSkins)}static changeSkin(e){this.currentSkin=e,u.setNumber(l.CURRENT_SKIN,e),this.emitter.emit("skin-changed",e)}static getCurrentSkinColors(){return b[this.currentSkin].colors}static getCurrentSkin(){return this.currentSkin}static getUnlockedSkins(){return this.unlockedSkins}}f.unlockedSkins=[];class y extends Phaser.Physics.Arcade.Sprite{constructor(e){super(e.scene,e.x,e.y,e.texture,e.frame),this.onSkinChanged=e=>{this.setFrame(e),this.specialParticle.destroy(),this.addSpecialParticle(),this.combo<4&&this.specialParticle.stop()},this._scene=e.scene,this.addSmokeParticle(),this.addSpecialParticle(),this.resetCombo(),e.scene.add.existing(this),e.scene.physics.add.existing(this),f.emitter.on("skin-changed",this.onSkinChanged)}shoot(e){this.setVelocity(e.x,e.y),this.setBounce(.7),this.setGravityY(2e3),this._scene.shootSound.play(),this.combo>3&&this._scene.comboShootSound.play()}getCombo(){return this.combo}increaseCombo(){if(this.combo<10&&this.combo++,3===this.combo&&this.smokeParticle.start(),this.combo>=4){4===this.combo&&this.specialParticle.start();const e=Phaser.Display.Color.IntegerToRGB(f.getCurrentSkinColors()[0]);this._scene.cameras.main.flash(200,e.r,e.g,e.b),this._scene.cameras.main.shake(200,.003)}}resetCombo(){this.combo=0,this.specialParticle.stop(),this.smokeParticle.stop()}addSpecialParticle(){this.specialParticle=this._scene.add.particles(150,450,b[f.getCurrentSkin()].texure,{color:f.getCurrentSkinColors(),colorEase:"quad.out",lifespan:700,angle:{min:0,max:360},rotate:{min:0,max:360},scale:{start:.35,end:0},speed:{min:10,max:30},frequency:40}),this.specialParticle.startFollow(this,-150,-450),this.specialParticle.setDepth(-4)}addSmokeParticle(){this.smokeParticle=this._scene.add.particles(150,450,"circle",{color:[16777215,15790320,8947848],alpha:{start:.8,end:.1,ease:"sine.out"},colorEase:"quad.out",lifespan:500,angle:{min:0,max:360},rotate:{min:0,max:360},scale:.8,speed:{min:50,max:60},frequency:60}),this.smokeParticle.startFollow(this,-150,-450),this.smokeParticle.setDepth(-5)}update(e,t){if(this.body){const e=this.body.velocity.x;e>10?this.rotation+=.02*t:e<-10&&(this.rotation-=.02*t)}}}var k;class C{constructor(e){this.init(),this.createCurrentScoreText(e),this.createBestScoreText(e),this.createHighScoreText(e)}init(){C.curScore=0,C.highScore=0,C.highScore=u.getInt(l.HIGH_SCORE)}createCurrentScoreText(e){C.curScoreText=e.add.bitmapText(300,170,"objet","0",180).setTint(12698049).setDepth(-3).setOrigin(.5)}createBestScoreText(e){C.bestScoreText=e.add.bitmapText(300,20,"objet","Best Score",40).setTint(16485157).setDepth(-3).setOrigin(.5).setAlpha(0)}createHighScoreText(e){C.highScoreText=e.add.bitmapText(300,70,"objet",u.getString(l.HIGH_SCORE),90).setTint(16485157).setDepth(-3).setOrigin(.5).setAlpha(0)}}k=C,C.updateScore=e=>{k.curScore=e,k.curScore>k.highScore&&(k.highScore=k.curScore,u.setNumber(l.HIGH_SCORE,k.highScore),k.highScoreText.setText(k.highScore.toString())),k.curScoreText.setText(k.curScore.toString())};class v{static init(e){v.scene=e,v.popUpText=e.add.bitmapText(0,0,"objet","",40).setTint(16485157).setDepth(-3).setOrigin(.5).setAlpha(0)}static create(e){this.popUpQueue.push(e)}static playTweenQueue(e,t){const s=this.popUpQueue.shift();s&&(this.popUpText.x=e,this.popUpText.y=t,this.popUpText.setText(s.text).setTint(s.color),this.scene.add.tween({targets:this.popUpText,alpha:{value:1,duration:250,yoyo:!0},y:{value:t-20,duration:300,ease:"Back.out"},onComplete:()=>{this.playTweenQueue(e,t)}}))}}v.popUpQueue=[];class w extends Phaser.GameObjects.NineSlice{constructor(e){super(e.scene,e.x,e.y,"mini-wall",0,25,309,10,10,100,100),this.ball=e.ball,this.scene.add.existing(this).setScale(.65),this.scene.physics.add.existing(this,!1),this.body&&(this.physic=this.body,this.physic.immovable=!0),this.scene.physics.add.collider(this.ball,this,(()=>{this.scene.bounceCount++}))}setActive(e){return this.physic.enable=e,this}}class P extends i().Scene{constructor(){super("game"),this.math=new(i().Math.RandomDataGenerator),this.baskets=[],this.walls=[],this.pointSounds=[],this.handleBallTouch=e=>{if(e===this.targetBasket){this.dotLine.clearNormalLine(),this.generateNextBasket(e),this.draggingZone.y=this.targetBasket.y,this.deadZone.y=e.y+450,this.walls.forEach((e=>e.y=this.targetBasket.y)),this.ball.increaseCombo();const t=this.ball.getCombo();4===t?this.comboStartSound.play():t>4&&this.comboHitSound.play(),this.curScore+=t,this.pointSounds[t-1].play(),C.updateScore(this.curScore),this.bounceCount>1?v.create({text:`Bounce x${this.bounceCount}`,color:3187455}):1===this.bounceCount&&v.create({text:"Bounce",color:3187455}),this.previousCombo>0&&t>this.previousCombo&&v.create({text:"Perfect",color:16485157}),this.previousCombo=t,v.create({text:`+${t}`,color:13652778}),v.playTweenQueue(e.x,e.y-50)}this.bounceCount=0}}init(){this.dotLine.init()}create(){this.initializeVariables(),this.createBall(),this.createDraggingZone(),this.createDeadZone(),this.createWalls(),this.createBaskets(),this.createMiniWall(),this.configureCamera()}initializeVariables(){this.curScore=0,this.bounceCount=0,this.previousCombo=0,this.camera=this.cameras.main,this.dotLine.init(),this.shootSound=this.sound.add("shoot"),this.kickSound=this.sound.add("kick"),this.dieSound=this.sound.add("die"),this.wallHitSound=this.sound.add("wall-hit"),this.starSound=this.sound.add("star"),this.comboHitSound=this.sound.add("combo-hit"),this.comboShootSound=this.sound.add("combo-shoot"),this.comboStartSound=this.sound.add("combo-start");for(let e=1;e<=10;e++)this.pointSounds[e-1]=this.sound.add(e.toString());this.sound.setMute("false"===u.getString(l.SOUND)),f.init(),v.init(this)}createBall(){this.ball=new y({scene:this,x:150,y:250,texture:"ball",frame:f.getCurrentSkin()}).setDepth(1).setName("Ball").setCircle(100).setScale(.32).setDepth(0).setGravityY(1200).setFriction(0)}createDraggingZone(){this.draggingZone=this.add.rectangle(300,500,o,h,0,0).setInteractive({draggable:!0})}createDeadZone(){this.deadZone=this.add.rectangle(300,h,o,200,0,0),this.physics.add.existing(this.deadZone),this.physics.add.overlap(this.deadZone,this.ball,(()=>{p.getCurrentState()===c.PLAYING&&(p.updateGameState(c.GAME_OVER,this),this.dieSound.play(),this.camera.stopFollow())}))}createWalls(){const e=this.add.image(0,0,"e4").setAlpha(0).setScale(.5),t=[{x:0,y:500,origin:{x:1,y:.5}},{x:o,y:500,origin:{x:0,y:.5}}];this.walls=t.map((e=>this.add.rectangle(e.x,e.y,50,3e3,13224393).setOrigin(e.origin.x,e.origin.y))),this.walls.forEach((t=>{this.physics.add.existing(t),t.body.setImmovable(!0).moves=!1,this.physics.add.collider(this.ball,t,(()=>{this.wallHitSound.play(),e.x=this.ball.x,e.y=this.ball.y,e.setTint(f.getCurrentSkinColors()[0]).setAlpha(0).setScale(.5,.1).setFlipX(e.x>300),this.add.tween({targets:e,alpha:{value:1,duration:100,yoyo:!0},scaleY:{value:2,duration:200},easing:"Quad.out",onComplete:()=>{e.setAlpha(0)}}),this.bounceCount++}))}))}createBaskets(){this.baskets[0]=new S(this,150,400,this.ball),this.baskets[1]=new S(this,480,350,this.ball),this.ball.y=this.baskets[0].y,this.baskets.forEach((e=>{e.emitter.on("onHasBall",this.handleBallTouch),this.add.existing(e)})),this.targetBasket=this.baskets[1],this.add.existing(this.baskets[0]),this.add.existing(this.baskets[1])}configureCamera(){this.input.dragDistanceThreshold=10,this.camera.startFollow(this.ball,!1,0,.01,-150,250)}createMiniWall(){this.miniWall=new w({scene:this,x:300,y:100,ball:this.ball}).setActive(!1).setScale(0)}generateNextBasket(e){const t=this.baskets.indexOf(e),s=this.baskets[1-t];this.targetBasket=s,this.targetBasket.y=this.math.integerInRange(e.y-450,e.y-150),0===t?(this.targetBasket.x=this.math.integerInRange(360,480),this.targetBasket.rotation=this.math.realInRange(-.5,0)):(this.targetBasket.x=this.math.integerInRange(120,240),this.targetBasket.rotation=this.math.realInRange(0,.5)),n.Percent(20)&&this.targetBasket.createStar(this),this.miniWall.setActive(!1).setScale(0),n.Percent(10)?this.targetBasket.setMoveable(!0):n.Percent(10)&&(this.miniWall.setActive(!0).y=this.targetBasket.y-50,this.add.tween({targets:this.miniWall,scale:.65,duration:300,ease:"Back.out"}),this.miniWall.x=this.targetBasket.x+(n.Percent(50)?100:-100)),this.targetBasket.scale=.01,this.add.tween({targets:this.targetBasket,scale:1,duration:300,ease:"Back.out"})}update(e,t){this.ball.update(e,t),this.baskets[0].update(),this.baskets[1].update()}}class B extends Phaser.Plugins.ScenePlugin{constructor(e,t,s){super(e,t,s)}init(){this.scene&&(this.trajectoryLineGraphics=this.scene.add.graphics(),this.normalLineGraphics=this.scene.add.graphics())}drawLine(e,t,s){this.normalLineGraphics.clear();const a=s||10;for(let s=0;s<a;s++){const i=(t.x-e.x)/a*s+e.x,r=(t.y-e.y)/a*s+e.y;this.normalLineGraphics.fillStyle(13224393,1),this.normalLineGraphics.setDepth(-4),this.normalLineGraphics.fillCircle(i,r,7)}}drawTrajectoryLine(e,t,s){this.trajectoryLineGraphics.clear();for(let a=0;a<=10;a++){const i=a/20;let r=e.x+t.x*i;const h=e.y+t.y*i+s*i*i/2;r<0?r=-r:r>o&&(r=o-(r-o)),this.trajectoryLineGraphics.fillStyle(15902267,1),this.trajectoryLineGraphics.setDepth(-2),this.trajectoryLineGraphics.fillCircle(r,h,15/(a+1)+5)}}clearTrajectoryLine(){this.trajectoryLineGraphics.clear()}clearNormalLine(){this.normalLineGraphics.clear()}}class T extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture,e.frame),this.setInteractive(),this.pointerDownCallback=e.pointerDownCallback,this.pointerUpCallback=e.pointerUpCallback,this.on("pointerdown",this.onPointerDown),this.on("pointerup",this.onPointerUp),this.on("pointerout",this.onPointerOut),this.defaultScale=e.scale,this.setScale(e.scale),this.isDown=!1,e.scene.add.existing(this)}onPointerDown(){this.setScale(.9*this.defaultScale),this.isDown=!0,void 0!==this.pointerDownCallback&&this.pointerDownCallback()}onPointerUp(){this.setScale(this.defaultScale),this.isDown&&(this.isDown=!1,void 0!==this.pointerUpCallback&&this.pointerUpCallback())}onPointerOut(){this.setScale(this.defaultScale)}}class E extends Phaser.Scene{constructor(){super("main-menu"),this.handlePauseButtonClick=()=>{p.getCurrentState()===c.PLAYING&&p.updateGameState(c.PAUSE,this)},this.handleCustomizeButtonClick=()=>{p.updateGameState(c.CUSTOMIZE,this)},this.handleSettingsButtonClick=()=>{p.updateGameState(c.SETTINGS,this)},this.onGameStateChanged=e=>{e===c.GAME_OVER&&this.tweens.add({targets:this.pauseBtn,alpha:{value:0,duration:500},ease:"Quad.out"})},p.emitter.on("game-state-changed",this.onGameStateChanged)}create(){this.createTitle(),this.createHelpAnimation(),this.createPauseButton(),this.createSettingsButton(),this.createCustomizeButton(),this.setupInputEvents(),new d(this)}createTitle(){this.title=this.add.image(300,-250,"title").setScale(.5),this.tweens.add({targets:this.title,y:{value:250,duration:500},ease:"Quad.out"})}createHelpAnimation(){this.help=this.add.sprite(120,880,"help").setScale(.6),this.help.anims.create({key:"idle",frames:this.anims.generateFrameNames("help",{start:0,end:23}),frameRate:32,repeat:-1}),this.help.play("idle")}createPauseButton(){this.pauseBtn=new T({scene:this,x:36,y:35,texture:"pause-btn",scale:.25,pointerUpCallback:this.handlePauseButtonClick}).setAlpha(0)}createSettingsButton(){this.settingsBtn=new T({scene:this,x:36,y:35,texture:"settings-mainmenu-btn",scale:1,pointerDownCallback:this.handleSettingsButtonClick})}createCustomizeButton(){this.customizeBtn=new T({scene:this,x:420,y:850,texture:"customize-mainmenu-btn",scale:.4,pointerDownCallback:this.handleCustomizeButtonClick})}setupInputEvents(){this.input.on("pointerdown",(()=>{p.getCurrentState()===c.READY&&(p.updateGameState(c.PLAYING,this),this.handleGameStart())}))}handleGameStart(){this.tweens.add({targets:[this.title,this.help,this.customizeBtn,this.settingsBtn],alpha:{value:0,duration:500},ease:"Quad.out"}),this.tweens.add({targets:this.pauseBtn,alpha:{value:1,duration:500},ease:"Quad.out"}),this.help.stop()}}class A extends Phaser.Scene{constructor(){super("result"),this.onGameStateChanged=e=>{e===c.GAME_OVER&&this.showResult()},p.init(),p.emitter.on("game-state-changed",this.onGameStateChanged)}create(){this.score=new C(this),this.shareBtn=new T({scene:this,x:.28*o,y:800,texture:"share-btn",scale:.4}).setScale(0),this.resetBtn=new T({scene:this,x:300,y:800,texture:"reset-btn",scale:.4,pointerUpCallback:()=>{p.updateGameState(c.READY,this)}}).setScale(0),this.settingsBtn=new T({scene:this,x:432,y:800,texture:"settings-btn",scale:.4,pointerUpCallback:()=>{p.updateGameState(c.SETTINGS,this)}}).setScale(0)}showResult(){this.resetBtn.setScale(0),this.settingsBtn.setScale(0),this.shareBtn.setScale(0),this.add.tween({targets:[this.resetBtn,this.settingsBtn,this.shareBtn],scale:{value:.4,duration:300},ease:"Quad.out"}),this.add.tween({targets:[C.highScoreText,C.bestScoreText],alpha:{value:1,duration:500},ease:"Quad.out"})}}class O extends Phaser.Scene{constructor(){super("pause")}create(){new T({scene:this,x:300,y:350,texture:"mainmenu-btn",scale:.4,pointerUpCallback:()=>{p.updateGameState(c.READY,this)}}),new T({scene:this,x:300,y:450,texture:"customize-btn",scale:.4,pointerUpCallback:()=>{p.updateGameState(c.CUSTOMIZE,this)}}),new T({scene:this,x:300,y:550,texture:"settings-pause-btn",scale:.4,pointerUpCallback:()=>{p.updateGameState(c.SETTINGS,this)}}),new T({scene:this,x:300,y:650,texture:"resume-btn",scale:.4,pointerUpCallback:()=>{p.updateGameState(c.PLAYING,this)}})}}class G extends Phaser.Scene{constructor(){super("customize"),this.skins=[],this.isPointerDown=!1,this.lastPointerPos=new Phaser.Math.Vector2(0,0)}create(){this.createBackButton(),this.createSkinButtons(),this.selectedCirc=this.add.ellipse(200,200,140,140,16767293).setDepth(-4),this.selectedCirc.x=this.skins[f.getCurrentSkin()].x,this.selectedCirc.y=this.skins[f.getCurrentSkin()].y,this.input.on("pointerdown",(e=>{this.isPointerDown=!0,this.lastPointerPos.x=e.x,this.lastPointerPos.y=e.y})),this.input.on("pointerup",(e=>{this.isPointerDown=!1})),this.input.on("pointermove",(e=>{if(this.isPointerDown){for(let t=0;t<this.skins.length;t++)this.skins[t].y-=this.lastPointerPos.y-e.y;this.selectedCirc.y-=this.lastPointerPos.y-e.y}this.lastPointerPos.x=e.x,this.lastPointerPos.y=e.y}))}createBackButton(){new T({scene:this,x:36,y:35,texture:"back-btn",scale:.3,pointerUpCallback:()=>{p.getPreviousState()!==c.READY&&p.getPreviousState()!==c.PAUSE||p.updateGameState(p.getPreviousState(),this)}})}createSkinButtons(){const e=f.getUnlockedSkins();this.skins=[];for(let t=0;t<116;t++){if(-1===e.indexOf(t)){const s=new T({scene:this,x:0,y:0,texture:"item",scale:.56,pointerDownCallback:()=>{-1===e.indexOf(t)?d.getCurrentStar()>100&&(d.updateStar(d.getCurrentStar()-100),f.unlockSkin(t),s.setTexture("ball",t)):(console.log("a"),f.changeSkin(t),this.selectedCirc.x=this.skins[t].x,this.selectedCirc.y=this.skins[t].y)}});this.skins.push(s)}else this.skins.push(new T({scene:this,x:0,y:0,texture:"ball",frame:t,scale:.56,pointerDownCallback:()=>{f.changeSkin(t),this.selectedCirc.x=this.skins[t].x,this.selectedCirc.y=this.skins[t].y}}));Phaser.Actions.GridAlign(this.skins,{width:4,height:29,cellWidth:o/4.5,cellHeight:o/4.5,x:0,y:0})}}}class I extends T{constructor(e){super({scene:e.scene,x:e.x,y:e.y,texture:e.textureOn,frame:e.frameOn,scale:e.scale,pointerUpCallback:e.pointerUpCallback,pointerDownCallback:e.pointerDownCallback}),this.isOn=!0,this.s=e}setActive(e){return this.isOn=e,e?this.setTexture(this.s.textureOn,this.s.frameOn):this.setTexture(this.s.textureOff,this.s.frameOff),this}toggle(){this.setActive(!this.isOn)}getActive(){return this.isOn}}class D extends Phaser.Scene{constructor(){super("settings")}create(){this.createBackButton(),this.createTexts(),this.createSwitchButtons(),this.createClearDataButton()}createBackButton(){new T({scene:this,x:36,y:35,texture:"back-btn",scale:.3,pointerUpCallback:()=>{const e=p.getPreviousState();e!==c.READY&&e!==c.PAUSE&&e!==c.GAME_OVER||p.updateGameState(e,this)}})}createTexts(){this.addText(60,300,"SOUNDS"),this.addText(60,400,"VIBRATION"),this.addText(60,500,"NIGHT MODE")}addText(e,t,s){this.add.bitmapText(e,t,"objet",s,50).setTint(12698049).setDepth(-3)}createClearDataButton(){new T({scene:this,x:300,y:700,texture:"cleardata-btn",scale:.5,pointerUpCallback:()=>{u.deleteAll()}})}createSwitchButtons(){this.soundBtn=this.createSwitchButton(420,300,l.SOUND).setActive("true"===u.getString(l.SOUND)),this.vibrationBtn=this.createSwitchButton(420,400,l.VIBRATION).setActive("true"===u.getString(l.VIBRATION)),this.nightModeBtn=this.createSwitchButton(420,500,l.NIGHT_MODE).setActive("true"===u.getString(l.NIGHT_MODE))}createSwitchButton(e,t,s){const a=new I({scene:this,x:e,y:t,textureOn:"rounded-btn",frameOn:0,textureOff:"rounded-btn",frameOff:1,scale:.5,pointerUpCallback:()=>{switch(a.toggle(),u.setString(s,`${a.getActive()}`),s){case l.SOUND:this.scene.get("game").sound.setMute(!a.getActive());case l.VIBRATION:case l.NIGHT_MODE:}}}).setOrigin(0);return a}}const N={type:i().WEBGL,physics:{default:"arcade",arcade:{gravity:{y:0}}},scale:{width:o,height:h,parent:"phaser-game",mode:i().Scale.FIT,autoCenter:i().Scale.CENTER_BOTH},plugins:{scene:[{key:"DotLinePlugin",plugin:B,start:!0,mapping:"dotLine"}]},roundPixels:!0,backgroundColor:"0xe5e5e5",scene:[r,P,A,E,G,D,O]};new(i().Game)(N)}},s={};function a(e){var i=s[e];if(void 0!==i)return i.exports;var r=s[e]={exports:{}};return t[e].call(r.exports,r,r.exports,a),r.exports}a.m=t,e=[],a.O=(t,s,i,r)=>{if(!s){var o=1/0;for(l=0;l<e.length;l++){for(var[s,i,r]=e[l],h=!0,n=0;n<s.length;n++)(!1&r||o>=r)&&Object.keys(a.O).every((e=>a.O[e](s[n])))?s.splice(n--,1):(h=!1,r<o&&(o=r));if(h){e.splice(l--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[s,i,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var i,r,[o,h,n]=s,c=0;if(o.some((t=>0!==e[t]))){for(i in h)a.o(h,i)&&(a.m[i]=h[i]);if(n)var l=n(a)}for(t&&t(s);c<o.length;c++)r=o[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(l)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var i=a.O(void 0,[216],(()=>a(36)));i=a.O(i)})();