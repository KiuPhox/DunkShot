(()=>{"use strict";var t,e={831:(t,e,s)=>{var a=s(260),i=s.n(a);const h=["shoot","kick","die","1"];class r extends i().Scene{constructor(){super("preloader")}preload(){const{width:t,height:e}=this.scale,s=this.add.graphics(),a=this.add.text(.5*t,.45*e,"0%",{fontFamily:"AkzidenzGrotesk",fontSize:"36px",color:"#f2a63b"}).setOrigin();this.load.on("progress",(i=>{s.clear(),s.fillStyle(15902267,1),s.fillRect(0,.5*e,t*i,30),a.setText(Math.round(100*i).toString()+"%")})),this.load.on("complete",(()=>{s.destroy(),console.log("Loading complete")})),this.load.spritesheet("ball","assets/textures/ball-sheet.png",{frameWidth:232}),this.load.spritesheet("basket","assets/textures/basket-sheet.png",{frameWidth:354,frameHeight:56.5}),this.load.spritesheet("help","assets/textures/help-sheet.png",{frameWidth:215,frameHeight:1960/6}),this.load.image("dot","assets/textures/dot-sheet.png"),this.load.image("net","assets/textures/net-sheet.png"),this.load.image("title","assets/textures/title-sheet.png"),this.load.image("reset-btn","assets/textures/btnreset-sheet.png"),this.load.image("settings-btn","assets/textures/btnsettings-sheet.png"),this.load.image("share-btn","assets/textures/btnshare-sheet.png"),this.load.image("pause-btn","assets/textures/btnpause-sheet.png"),this.load.image("resume-btn","assets/textures/btnresume-sheet.png"),this.load.image("mainmenu-btn","assets/textures/btnmainmenu-sheet.png"),this.load.image("e3","assets/textures/e3-sheet.png"),this.load.bitmapFont("objet","assets/fonts/objet-extrabold.png","assets/fonts/objet-extrabold.xml"),this.loadAudio()}create(){this.scene.start("game").launch("result").launch("main-menu")}loadAudio(){for(const t of h)this.load.audio(t,`assets/audios/${t}.ogg`)}}const n=[[0,30],[32,0],[-32,0],[20,20],[-20,20]];class o extends Phaser.GameObjects.Container{constructor(t,e,s,a){super(t,e,s),this.otherCirc=[],this.hasBall=!1,this.shootVelocity=new Phaser.Math.Vector2(0,0),this.emitter=new Phaser.Events.EventEmitter,this.player=a,this.createBasketObjects(t),this.registerOverlapEvent(t),this.registerDragEvents(t)}createBasketObjects(t){this.basketTopSprite=t.add.sprite(0,-10,"basket",0).setScale(.22),this.basketBottomSprite=t.add.sprite(0,2,"basket",1).setScale(.22),this.basketEffectSprite=t.add.sprite(0,0,"e3").setScale(.2).setAlpha(0);const e=t.add.sprite(0,15,"net").setScale(.22);this.centerCirc=t.physics.add.sprite(0,20,"").setCircle(4).setOffset(12,12).setAlpha(0);for(let e=0;e<5;e++)this.otherCirc[e]=t.physics.add.sprite(n[e][0],n[e][1],"").setCircle(4).setOffset(12,12).setAlpha(0),this.add(this.otherCirc[e]),t.physics.add.existing(this.otherCirc[e]),this.otherCirc[e].body.setImmovable(!0).setBounce(0).moves=!1,t.physics.add.collider(this.otherCirc[e],this.player);this.add(e),this.add(this.basketTopSprite),this.add(this.basketBottomSprite),this.add(this.centerCirc),this.add(this.basketEffectSprite),t.physics.add.existing(this.centerCirc)}registerOverlapEvent(t){t.physics.add.overlap(this.centerCirc,this.player,(()=>{this.hasBall||(this.hasBall=!0,this.player.setBounce(0),this.emitter.emit("onHasBall",this),this.changeBasketTexture(1),this.animateBasketEffect())}))}registerDragEvents(t){const e=t.add.graphics(),s=new Phaser.Geom.Line;t.input.on("dragstart",(t=>{this.hasBall&&(this.dragStartPos=new Phaser.Math.Vector2(t.x,t.y),s.setTo(this.x,this.y,this.x,this.y),e.clear(),e.lineStyle(4,15902267),e.strokeLineShape(s))})),t.input.on("drag",(e=>{this.hasBall&&this.dragStartPos&&(this.handleDragMovement(e),this.updateShootLine(s),t.dotLine.drawTrajectoryLine(new Phaser.Math.Vector2(this.player.x,this.player.y),this.shootVelocity,1200))})),t.input.on("dragend",(()=>{this.hasBall&&this.shootVelocity.length()>100&&(e.clear(),this.hasBall=!1,this.shootBall(),t.dotLine.clear(),this.changeBasketTexture(0))}))}handleDragMovement(t){this.player.setGravityY(0),this.player.setVelocity(0),this.dragPos=new Phaser.Math.Vector2(t.x,t.y),this.shootVelocity=new Phaser.Math.Vector2(7*(this.dragStartPos.x-this.dragPos.x),7*(this.dragStartPos.y-this.dragPos.y)),this.shootVelocity.length()>10&&(this.rotation=this.shootVelocity.angle()+Math.PI/2,Phaser.Math.RotateAroundDistance(this.player,this.x,this.y,0,2))}updateShootLine(t){t.x2=2*(this.dragPos.x-this.dragStartPos.x)+this.x,t.y2=2*(this.dragPos.y-this.dragStartPos.y)+this.y,Phaser.Geom.Line.RotateAroundPoint(t,t.getPointA(),Math.PI)}animateBasketEffect(){this.basketEffectSprite.setAlpha(1).setScale(.2),this.scene.add.tween({targets:this,rotation:{value:0,duration:300},ease:"Quad.out"}),this.scene.add.tween({targets:this.basketEffectSprite,alpha:{value:0,duration:300},scale:{value:.5,duration:300},ease:"Quad.out"})}changeBasketTexture(t){this.basketTopSprite.setTexture("basket",2*t),this.basketBottomSprite.setTexture("basket",2*t+1)}shootBall(){this.player.setVelocity(this.shootVelocity.x,this.shootVelocity.y),this.player.setBounce(.7),this.player.setGravityY(1200),this.scene.shootSound.play()}}var l,c;!function(t){t.READY="ready",t.PLAYING="playing",t.GAME_OVER="game_over",t.PAUSE="pause"}(l||(l={}));class d{static init(){this.emitter=new Phaser.Events.EventEmitter}static updateGameState(t){switch(this.gameState=t,this.gameState){case l.READY:this.handleReadyState();break;case l.PLAYING:this.handlePlayingState();break;case l.GAME_OVER:this.handleGameOverState()}this.emitter.emit("game-state-changed",this.gameState)}static handleReadyState(){}static handlePlayingState(){}static handleGameOverState(){}static getGameState(){return this.gameState}}d.gameState=l.READY;class p{constructor(t){var e;const{width:s,height:a}=t.scale;p.curScore=0,p.highScore=0;const i=localStorage.getItem("highScore");null!==i&&(p.highScore=parseInt(i)),p.curScoreText=t.add.bitmapText(.5*s,.17*a,"objet","0",90).setTint(12698049).setDepth(-3).setOrigin(.5),p.bestScoreText=t.add.bitmapText(.5*s,.02*a,"objet","Best Score",20).setTint(16485157).setDepth(-3).setOrigin(.5).setAlpha(0),p.highScoreText=t.add.bitmapText(.5*s,.07*a,"objet",null===(e=localStorage.getItem("highScore"))||void 0===e?void 0:e.toString(),50).setTint(16485157).setDepth(-3).setOrigin(.5).setAlpha(0)}}c=p,p.updateScore=t=>{c.curScore=t,c.curScore>c.highScore&&(c.highScore=c.curScore,localStorage.setItem("highScore",c.highScore.toString()),c.highScoreText.setText(c.highScore.toString())),c.curScoreText.setText(c.curScore.toString())};class u extends i().Scene{constructor(){super("game"),this.math=new(i().Math.RandomDataGenerator),this.baskets=[],this.walls=[],this.handleBallTouch=t=>{if(t===this.targetBasket){const e=this.baskets.indexOf(t),s=this.baskets[1-e];this.targetBasket=s,s.y=this.math.integerInRange(t.y-150,t.y-50),s.rotation=1===e?this.math.realInRange(0,.5):this.math.realInRange(-.5,0),this.draggingZone.y=s.y,this.deadZone.y=t.y+200,this.walls.forEach((t=>t.y=s.y)),this.curScore++,this.hitSound.play(),p.updateScore(this.curScore)}}}init(){this.dotLine.init()}create(){const{width:t,height:e}=this.scale;this.curScore=0,this.camera=this.cameras.main,this.player=this.physics.add.sprite(.25*t,.7*e,"ball",0).setDepth(1).setName("Ball").setCircle(116).setScale(.15).setDepth(0).setGravityY(1200).setFriction(0),this.draggingZone=this.add.rectangle(.5*t,.5*e,t,e,0,0).setInteractive({draggable:!0}),this.deadZone=this.add.rectangle(.5*t,e,t,.2*e,0,0),this.physics.add.existing(this.deadZone),this.physics.add.overlap(this.deadZone,this.player,(()=>{d.getGameState()===l.PLAYING&&(d.updateGameState(l.GAME_OVER),this.dieSound.play(),this.camera.stopFollow())}));const s=[{x:0,y:.5*e},{x:t,y:.5*e}];this.walls=s.map((t=>this.add.rectangle(t.x,t.y,24,3*e,13224393))),this.walls.forEach((t=>{this.physics.add.existing(t),t.body.setImmovable(!0).moves=!1,this.physics.add.collider(this.player,t)})),this.baskets[0]=new o(this,.25*t,400,this.player),this.baskets[1]=new o(this,.8*t,350,this.player),this.baskets.forEach((t=>{t.emitter.on("onHasBall",this.handleBallTouch),this.add.existing(t)})),this.targetBasket=this.baskets[1],this.add.existing(this.baskets[0]),this.add.existing(this.baskets[1]),this.input.dragDistanceThreshold=10,this.camera.startFollow(this.player,!1,0,.01,-t/4,e/4),this.shootSound=this.sound.add("shoot"),this.kickSound=this.sound.add("kick"),this.dieSound=this.sound.add("die"),this.hitSound=this.sound.add("1")}update(){if(this.player.body){const t=this.player.body.velocity.x;t>10?this.player.rotation+=.05:t<-10&&(this.player.rotation-=.05)}}}class g extends Phaser.Plugins.ScenePlugin{constructor(t,e,s){super(t,e,s)}init(){this.scene&&(this.graphics=this.scene.add.graphics())}drawTrajectoryLine(t,e,s){this.graphics.clear();for(let a=0;a<10;a++){const i=a/20,h=t.x+e.x*i,r=t.y+e.y*i+s*i*i/2;this.graphics.fillStyle(15902267,1),this.graphics.setDepth(-2),this.graphics.fillCircle(h,r,(15-a)/2)}}clear(){this.graphics.clear()}}class m extends Phaser.GameObjects.Image{constructor(t){super(t.scene,t.x,t.y,t.texture,t.frame),this.setInteractive(),this.pointerDownCallback=t.pointerDownCallback,this.pointerUpCallback=t.pointerUpCallback,this.on("pointerdown",this.onPointerDown),this.on("pointerup",this.onPointerUp),this.on("pointerout",this.onPointerOut),this.defaultScale=t.scale,this.setScale(t.scale),t.scene.add.existing(this)}onPointerDown(){this.setScale(.9*this.defaultScale),void 0!==this.pointerDownCallback&&this.pointerDownCallback()}onPointerUp(){this.setScale(this.defaultScale),void 0!==this.pointerUpCallback&&this.pointerUpCallback()}onPointerOut(){this.setScale(this.defaultScale)}}class S extends Phaser.Scene{constructor(){super("main-menu"),this.onGameStateChanged=t=>{t===l.GAME_OVER&&this.add.tween({targets:this.pauseBtn,alpha:{value:0,duration:500},ease:"Quad.out"})},d.emitter.on("game-state-changed",this.onGameStateChanged)}create(){const{width:t,height:e}=this.scale,s=this.add.image(.5*t,.25*-e,"title").setScale(.3),a=this.add.sprite(.2*t,.88*e,"help").setScale(.3);a.anims.create({key:"idle",frames:this.anims.generateFrameNames("help",{start:0,end:23}),frameRate:32,repeat:-1}),a.play("idle"),this.pauseBtn=new m({scene:this,x:.1*t,y:.035*e,texture:"pause-btn",scale:.15,pointerUpCallback:()=>{d.getGameState()===l.PLAYING&&this.scene.sleep().pause("game").launch("pause")}}).setAlpha(0),this.add.tween({targets:s,y:{value:.25*e,duration:500},ease:"Quad.out"}),this.input.on("pointerdown",(()=>{d.getGameState()===l.READY&&(d.updateGameState(l.PLAYING),a.stop(),this.add.tween({targets:[s,a],alpha:{value:0,duration:500},ease:"Quad.out"}),this.add.tween({targets:this.pauseBtn,alpha:{value:1,duration:500},ease:"Quad.out"}))}))}}class y extends Phaser.Scene{constructor(){super("result"),this.onGameStateChanged=t=>{t===l.GAME_OVER&&this.showResult()},d.init(),d.emitter.on("game-state-changed",this.onGameStateChanged)}create(){const{width:t,height:e}=this.scale;this.score=new p(this),this.resetBtn=new m({scene:this,x:.5*t,y:.8*e,texture:"reset-btn",scale:.23,pointerUpCallback:()=>{d.updateGameState(l.READY),this.scene.start("result").launch("game").launch("main-menu")}}).setScale(0),this.settingsBtn=new m({scene:this,x:.7*t,y:.8*e,texture:"settings-btn",scale:.23}).setScale(0),this.shareBtn=new m({scene:this,x:.3*t,y:.8*e,texture:"share-btn",scale:.23}).setScale(0)}showResult(){this.resetBtn.setScale(0),this.settingsBtn.setScale(0),this.shareBtn.setScale(0),this.add.tween({targets:[this.resetBtn,this.settingsBtn,this.shareBtn],scale:{value:.23,duration:300},ease:"Quad.out"}),this.add.tween({targets:[p.highScoreText,p.bestScoreText],alpha:{value:1,duration:500},ease:"Quad.out"})}}class b extends Phaser.Scene{constructor(){super("pause")}create(){const{width:t,height:e}=this.scale;new m({scene:this,x:.5*t,y:.55*e,texture:"resume-btn",scale:.22,pointerUpCallback:()=>{this.scene.stop().resume("game").wake("main-menu")}}),new m({scene:this,x:.5*t,y:.45*e,texture:"mainmenu-btn",scale:.22,pointerUpCallback:()=>{d.updateGameState(l.READY),this.scene.start("result").launch("game").launch("main-menu")}})}}const x={type:i().WEBGL,physics:{default:"arcade",arcade:{gravity:{y:0}}},scale:{width:window.innerHeight/1.7,height:window.innerHeight,parent:"phaser-game",mode:i().Scale.FIT,autoCenter:i().Scale.CENTER_BOTH},plugins:{scene:[{key:"DotLinePlugin",plugin:g,start:!0,mapping:"dotLine"}]},backgroundColor:"0xe5e5e5",scene:[r,u,y,S,b]};new(i().Game)(x)}},s={};function a(t){var i=s[t];if(void 0!==i)return i.exports;var h=s[t]={exports:{}};return e[t].call(h.exports,h,h.exports,a),h.exports}a.m=e,t=[],a.O=(e,s,i,h)=>{if(!s){var r=1/0;for(c=0;c<t.length;c++){for(var[s,i,h]=t[c],n=!0,o=0;o<s.length;o++)(!1&h||r>=h)&&Object.keys(a.O).every((t=>a.O[t](s[o])))?s.splice(o--,1):(n=!1,h<r&&(r=h));if(n){t.splice(c--,1);var l=i();void 0!==l&&(e=l)}}return e}h=h||0;for(var c=t.length;c>0&&t[c-1][2]>h;c--)t[c]=t[c-1];t[c]=[s,i,h]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};a.O.j=e=>0===t[e];var e=(e,s)=>{var i,h,[r,n,o]=s,l=0;if(r.some((e=>0!==t[e]))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(o)var c=o(a)}for(e&&e(s);l<r.length;l++)h=r[l],a.o(t,h)&&t[h]&&t[h][0](),t[h]=0;return a.O(c)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var i=a.O(void 0,[216],(()=>a(831)));i=a.O(i)})();