(()=>{"use strict";var t,e={246:(t,e,s)=>{var a=s(260),i=s.n(a);const r=600;class o extends i().Scene{constructor(){super("preload")}preload(){const t=this.add.graphics(),e=this.add.text(300,.45*this.scale.height,"0%",{fontFamily:"AkzidenzGrotesk",fontSize:"36px",color:"#f2a63b"}).setOrigin();this.load.on("progress",(s=>{t.clear(),t.fillStyle(15902267,1),t.fillRect(0,.5*this.scale.height,r*s,30),e.setText(Math.round(100*s).toString()+"%")})),this.load.on("complete",(()=>{t.destroy(),this.scene.start("game").launch("result").launch("main-menu"),console.log("Loading complete")})),this.load.spritesheet("ball","assets/textures/balls-atlas.png",{frameWidth:210,frameHeight:210}),this.load.spritesheet("basket","assets/textures/basket-sheet.png",{frameWidth:354,frameHeight:56.5}),this.load.spritesheet("help","assets/textures/help-sheet.png",{frameWidth:215,frameHeight:1960/6}),this.load.spritesheet("tail","assets/textures/tails-atlas.png",{frameWidth:261,frameHeight:261}),this.load.image("net","assets/textures/net.png"),this.load.image("logo","assets/textures/logo.png"),this.load.image("star","assets/textures/star.png"),this.load.image("mini-wall","assets/textures/obstacles/miniwall.png"),this.load.image("bouncer","assets/textures/obstacles/bouncer.png"),this.load.image("shield","assets/textures/obstacles/shield_2.png"),this.load.image("item","assets/textures/shop/item.png"),this.load.image("shop-line","assets/textures/shop/shop-line.png"),this.load.image("top-ornament","assets/textures/shop/top-ornament.png"),this.load.image("reset-btn","assets/textures/btnreset.png"),this.load.image("settings-btn","assets/textures/btnsettings.png"),this.load.image("settings-mainmenu-btn","assets/textures/btnsettings-mainmenu.png"),this.load.image("settings-pause-btn","assets/textures/btnsettings-pause.png"),this.load.image("share-btn","assets/textures/btnshare.png"),this.load.image("pause-btn","assets/textures/btnpause.png"),this.load.image("resume-btn","assets/textures/btnresume.png"),this.load.image("mainmenu-btn","assets/textures/btnmainmenu.png"),this.load.image("customize-mainmenu-btn","assets/textures/btncustomize-mainmenu.png"),this.load.image("customize-btn","assets/textures/btncustomize.png"),this.load.image("back-btn","assets/textures/btnback.png"),this.load.image("cleardata-btn","assets/textures/btncleardata.png"),this.load.image("unlimited-btn","assets/textures/btnunlimited.png"),this.load.spritesheet("rounded-btn","assets/textures/btnrounded-sheet.png",{frameHeight:122,frameWidth:224}),this.load.image("e3","assets/textures/e3.png"),this.load.image("e4","assets/textures/e4.png"),this.load.image("circle","assets/textures/circle.png"),this.load.bitmapFont("objet","assets/fonts/objet-extrabold.png","assets/fonts/objet-extrabold.xml"),this.loadAudio()}loadAudio(){for(let t=1;t<=10;t++)this.load.audio(t.toString(),`assets/audios/notes/${t}.mp3`);this.load.audio("star","assets/audios/star.mp3"),this.load.audio("wall-hit","assets/audios/wall-hit.mp3"),this.load.audio("combo-start","assets/audios/combo-start.mp3"),this.load.audio("combo-shoot","assets/audios/combo-shoot.mp3"),this.load.audio("combo-hit","assets/audios/combo-hit.mp3"),this.load.audio("release","assets/audios/release.mp3"),this.load.audio("game-over","assets/audios/game-over.mp3")}}class l{static Float(t,e){return Math.random()*(e-t)+t}static Int(t,e){return Math.floor(Math.random()*(e-t+1)+t)}static Percent(t){return this.Float(0,100)<=t}}var h,n,c;!function(t){t.READY="ready",t.PLAYING="playing",t.GAME_OVER="game_over",t.PAUSE="pause",t.CUSTOMIZE="customize",t.SETTINGS="settings"}(h||(h={}));class u{static init(){this.emitter=new Phaser.Events.EventEmitter}static updateGameState(t,e){switch(this.previousState=this.currentState,this.currentState=t,this.currentState){case h.READY:this.handleReadyState(e);break;case h.PLAYING:this.handlePlayingState(e);break;case h.GAME_OVER:this.handleGameOverState(e);break;case h.PAUSE:this.handlePauseState(e);break;case h.CUSTOMIZE:this.handleCustomizeState(e);break;case h.SETTINGS:this.handleSettingsState(e)}this.emitter.emit("game-state-changed",this.currentState)}static handleReadyState(t){t.scene.start("result").launch("game").launch("main-menu")}static handlePlayingState(t){this.previousState===h.PAUSE&&t.scene.stop().resume("game").wake("main-menu")}static handleGameOverState(t){this.previousState===h.SETTINGS&&t.scene.stop().wake("result")}static handlePauseState(t){this.previousState===h.CUSTOMIZE||this.previousState===h.SETTINGS?t.scene.stop().wake("pause"):this.previousState===h.PLAYING&&t.scene.sleep().pause("game").launch("pause")}static handleCustomizeState(t){this.previousState===h.READY?t.scene.stop("game").stop("result").start("customize"):this.previousState===h.PAUSE&&t.scene.sleep().launch("customize")}static handleSettingsState(t){this.previousState===h.GAME_OVER?t.scene.launch("settings").sleep("result"):this.previousState===h.READY?t.scene.stop("game").stop("result").start("settings"):this.previousState===h.PAUSE&&t.scene.launch("settings").sleep("pause")}static getCurrentState(){return this.currentState}static getPreviousState(){return this.previousState}}u.currentState=h.READY,u.previousState=h.READY;class d{static setString(t,e){try{localStorage.setItem(t,e)}catch(e){console.error(`Error saving ${t}:`,e)}}static getString(t){try{const e=localStorage.getItem(t);if(null!==e)return e}catch(e){console.error(`Error load ${t}:`,e)}return"0"}static setNumber(t,e){try{localStorage.setItem(t,e.toString())}catch(e){console.error(`Error saving ${t}:`,e)}}static getInt(t){try{const e=localStorage.getItem(t);if(null!==e)return parseInt(e)}catch(e){console.error(`Error load ${t}:`,e)}return 0}static getFloat(t){try{const e=localStorage.getItem(t);if(null!==e)return parseFloat(e)}catch(e){console.error(`Error load ${t}:`,e)}return 0}static setArray(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){console.error("Error saving array:",t)}}static getArray(t){try{const e=localStorage.getItem(t);if(null!==e)return JSON.parse(e)}catch(t){console.error("Error retrieving array:",t)}return[]}static save(t,e){try{const s=JSON.stringify(e);localStorage.setItem(t,s)}catch(e){console.error(`Error saving ${t}:`,e)}}static load(t){try{const e=localStorage.getItem(t);if(null!==e)return JSON.parse(e)}catch(e){console.error(`Error loading ${t}:`,e)}return null}static deleteAll(){localStorage.clear()}}!function(t){t.SOUND="sound",t.VIBRATION="vibration",t.NIGHT_MODE="night_mode"}(n||(n={})),function(t){t.PLAYER_DATA="player-data"}(c||(c={}));const g={highScore:0,stars:0,settings:{sound:!0,vibration:!1,nightMode:!1},skins:{current:0,unlocked:[0]}};class m{static getPlayerData(){try{const t=d.load(c.PLAYER_DATA);if(t)return t}catch(t){console.error("Error retrieving player high score:",t)}return g}static savePlayerData(t){d.save(c.PLAYER_DATA,t)}static getStars(){return this.getPlayerData().stars}static getHighScore(){return this.getPlayerData().highScore}static getCurrentSkin(){return this.getPlayerData().skins.current}static getUnlockedSkins(){return this.getPlayerData().skins.unlocked}static setSettings(t,e){const s=this.getPlayerData();switch(t){case n.SOUND:s.settings.sound=e;break;case n.VIBRATION:s.settings.vibration=e;break;case n.NIGHT_MODE:s.settings.nightMode=e}this.savePlayerData(s)}}class p{constructor(t){p.curStar=m.getStars(),p.curStarText=t.add.bitmapText(528,.05*t.scale.height,"objet",p.curStar.toString(),36).setTint(16485157).setDepth(-3).setOrigin(0,.5),t.physics.add.sprite(498,.05*t.scale.height,"star").setScale(.3)}static updateStar(t){this.curStar=t,u.getPreviousState()!==h.PAUSE&&u.getCurrentState()!==h.PLAYING||this.curStarText.setText(t.toString());const e=m.getPlayerData();e.stars=t,m.savePlayerData(e)}static increaseStar(){this.updateStar(this.curStar+1)}static getCurrentStar(){return this.curStar}}class x extends Phaser.Physics.Arcade.Sprite{constructor(t){super(t.scene,t.x,t.y,"star"),this.isActive=!0,t.ball&&(this.ball=t.ball,this.scene.physics.add.existing(this),this.scene.physics.add.overlap(this.ball,this,(()=>{this.isActive&&(this.isActive=!1,this.scene.starSound.play(),p.increaseStar(),this.scene.add.tween({targets:this,scale:{value:0},duration:300,ease:"Back.in",onComplete:()=>{this.scale=.3,this.alpha=0}}))})))}}const S=[[0,50],[65,-10],[-65,-10],[45,25],[-45,25]],b=1800;class y extends Phaser.GameObjects.Container{constructor(t,e,s,a){super(t,e,s),this.otherCirc=[],this.hasBall=!1,this.shootVelocity=new Phaser.Math.Vector2(0,0),this.emitter=new Phaser.Events.EventEmitter,t.add.existing(this),this.ball=a,this.createBasketObjects(t),this.registerOverlapEvent(t),this.registerDragEvents(t),this.isAvaliable=!0}createBasketObjects(t){this.basketTopSprite=t.add.sprite(this.x,this.y,"basket",0).setScale(.4).setOrigin(.5,1.5).setDepth(-3),this.basketBottomSprite=t.add.sprite(0,0,"basket",1).setScale(.4),this.basketEffectSprite=t.add.sprite(0,0,"e3").setScale(.4).setAlpha(0),this.netSprite=t.add.sprite(0,0,"net").setScale(.4).setOrigin(.5,0),this.centerCirc=t.physics.add.sprite(0,15,"").setCircle(20).setOffset(-4,-4).setAlpha(0);for(let e=0;e<5;e++)this.otherCirc[e]=t.physics.add.sprite(S[e][0],S[e][1],"").setCircle(6).setOffset(10,10).setAlpha(0),this.add(this.otherCirc[e]),t.physics.add.existing(this.otherCirc[e]),this.otherCirc[e].body.setImmovable(!0).setBounce(0).moves=!1,1===e||2===e?t.physics.add.collider(this.otherCirc[e],this.ball,(()=>{this.hasBall||this.ball.resetCombo()})):t.physics.add.collider(this.otherCirc[e],this.ball);this.add(this.netSprite),this.add(this.basketBottomSprite),this.add(this.centerCirc),this.add(this.basketEffectSprite),t.physics.add.existing(this.centerCirc)}createStar(t){this.star||(this.star=new x({scene:t,x:0,y:-70,ball:this.ball}).setScale(.3),this.add(this.star)),this.star.setAlpha(1),this.star.isActive=!0}setMoveable(t){this.moveTween&&this.moveTween.destroy();const e=this.x>300?l.Float(-300,-200):l.Float(200,300),s=l.Percent(50);this.moveTween=s?this.scene.add.tween({targets:this,x:this.x+e,ease:"Sine.inout",duration:2e3,yoyo:!0,repeat:-1}):this.scene.add.tween({targets:this,y:this.y+e,ease:"Sine.inout",duration:2e3,yoyo:!0,repeat:-1}),t?(s?this.scene.dotLine.drawLine(new Phaser.Math.Vector2(this.x,this.y),new Phaser.Math.Vector2(this.x+e,this.y),8):this.scene.dotLine.drawLine(new Phaser.Math.Vector2(this.x,this.y),new Phaser.Math.Vector2(this.x,this.y+e),8),this.moveTween.play()):this.moveTween.pause()}registerOverlapEvent(t){t.physics.add.overlap(this.centerCirc,this.ball,(()=>{!this.hasBall&&this.isAvaliable&&(this.isAvaliable=!1,this.hasBall=!0,this.ball.setBounce(0),this.emitter.emit("onHasBall",this),this.changeBasketTexture(1),this.animateBasketEffect(),this.setMoveable(!1))}))}registerDragEvents(t){t.input.on("dragstart",(t=>{this.hasBall&&(this.dragStartPos=new Phaser.Math.Vector2(t.x,t.y))})),t.input.on("drag",(e=>{this.hasBall&&this.dragStartPos&&this.handleDragMovement(e,t)})),t.input.on("dragend",(()=>{this.hasBall&&this.shootVelocity.length()>100&&(this.hasBall=!1,this.otherCirc[0].y=50,t.add.tween({targets:this.netSprite,scaleY:.4,duration:300,ease:"Back.out"}),this.ball.shoot(this.shootVelocity),t.dotLine.clearTrajectoryLine(),this.changeBasketTexture(0),this.scene.time.delayedCall(300,(()=>{this.isAvaliable=!0})))}))}handleDragMovement(t,e){this.ball.setGravityY(0),this.ball.setVelocity(0),this.dragPos=new Phaser.Math.Vector2(t.x,t.y),this.shootVelocity=new Phaser.Math.Vector2(7*(this.dragStartPos.x-this.dragPos.x),7*(this.dragStartPos.y-this.dragPos.y));const s=Math.min(this.shootVelocity.length(),b);this.shootVelocity=new Phaser.Math.Vector2(s*Math.cos(this.shootVelocity.angle()),s*Math.sin(this.shootVelocity.angle())),this.shootVelocity.length()>100&&(this.rotation=this.shootVelocity.angle()+Math.PI/2,this.netSprite.scaleY=s/b*.25+.4,this.otherCirc[0].y=s/b*25+50,this.ball.x=-Math.cos(this.shootVelocity.angle())*(s/b*25+13)+this.x,this.ball.y=-Math.sin(this.shootVelocity.angle())*(s/b*25+13)+this.y,this.shootVelocity.length()>500&&e.dotLine.drawTrajectoryLine(new Phaser.Math.Vector2(this.ball.x,this.ball.y),this.shootVelocity,2e3,Math.min(this.shootVelocity.length()/b*2,1)))}animateBasketEffect(){this.basketEffectSprite.setAlpha(1).setScale(.2),this.scene.add.tween({targets:this,rotation:{value:0,duration:300},ease:"Back.out"}),this.scene.add.tween({targets:this.basketEffectSprite,alpha:{value:0,duration:300},scale:{value:1,duration:300},ease:"Quad.out"}),this.scene.add.tween({targets:this.ball,x:{value:this.x,duration:200},y:{value:this.y+25,duration:100},ease:"Quad.out"}),this.scene.add.tween({targets:this.otherCirc[0],y:{value:this.otherCirc[0].y+15,duration:100,yoyo:!0},ease:"Quad.out"}),this.scene.add.tween({targets:this.netSprite,scaleY:{value:.5,duration:100},yoyo:!0,ease:"Quad.out"})}changeBasketTexture(t){this.basketTopSprite.setTexture("basket",2*t),this.basketBottomSprite.setTexture("basket",2*t+1)}update(){this.basketTopSprite.rotation=this.rotation,this.basketTopSprite.x=this.x,this.basketTopSprite.y=this.y,this.basketTopSprite.setScale(.4*this.scale)}}const f=[{texure:"tail",frame:"59",colors:[16773923,16763395,16733187]},{texure:"tail",frame:"59",colors:[16504530,13519295,10895045]},{texure:"tail",frame:"59",colors:[15089261,8198453,4326678]},{texure:"tail",frame:"59",colors:[16759739,16737205,11481700]},{texure:"tail",frame:"59",colors:[16645888,10288942,3728717]},{texure:"tail",frame:"59",colors:[16772020,16760745,16755884]},{texure:"tail",frame:"59",colors:[16645888,10288942,3728717]},{texure:"tail",frame:"51",colors:[4699647,1270751,403517]},{texure:"tail",frame:"4",colors:[16773923,16763395,16733187]},{texure:"tail",frame:"55",colors:[16773923,16763395,16733187]},{texure:"tail",frame:"19",colors:[16645888,10288942,3728717]},{texure:"tail",frame:"55",colors:[16504530,13519295,10895045]},{texure:"tail",frame:"4",colors:[16750529,14685260,10098275]},{texure:"tail",frame:"58",colors:[16773923,16763395,16733187]},{texure:"tail",frame:"55",colors:[16750529,14685260,10098275]},{texure:"tail",frame:"58",colors:[16773923,16763395,16733187]},{texure:"tail",frame:"55",colors:[16763395,16733187,10564403]},{texure:"tail",frame:"55",colors:[16645888,3728717,2200319,591232]},{texure:"tail",frame:"46",colors:[16773923,16763395,16733187]},{texure:"tail",frame:"59",colors:[4699647,1270751,403517]},{texure:"tail",frame:"59",colors:[16383312,8777543,48470]},{texure:"tail",frame:"46",colors:[8840703,6013176,33225]},{texure:"tail",frame:"58",colors:[16504530,13519295,10895045]},{texure:"tail",frame:"58",colors:[16504530,13519295,10895045]},{texure:"tail",frame:"59",colors:[16773923,16763395,16733187]},{texure:"tail",frame:"59",colors:[16773923,16763395,16733187]},{texure:"tail",frame:"59",colors:[16750529,16734296,14685260,10098275]},{texure:"tail",frame:"40",colors:[15219220,8982285,6489606]},{texure:"tail",frame:"46",colors:[16763395,16733187,10564403]},{texure:"tail",frame:"5",colors:[4699647,1270751,2049680,2300245]},{texure:"tail",frame:"19",colors:[16763395,16733187,10564403]},{texure:"tail",frame:"59",colors:[16760335,16391694,9175040]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"58",colors:[16383312,8777543,48470]},{texure:"tail",frame:"5",colors:[16383312,8777543,48470]},{texure:"tail",frame:"55",colors:[16504530,13519295,10895045]},{texure:"tail",frame:"59",colors:[16750529,16734296,14685260,10098275]},{texure:"tail",frame:"59",colors:[3728717,5551157,3641911]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"19",colors:[16773923,16763395,16733187]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"34",colors:[8840703,6013176,33225]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[16750529,16734296,14685260,10098275]},{texure:"tail",frame:"59",colors:[3728717,5551157,3641911]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"59",colors:[16760335,16391694,9175040]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"19",colors:[12185053,8899513,5676458,5733766]},{texure:"tail",frame:"10",colors:[16763395,16733187,10564403]},{texure:"tail",frame:"17",colors:[8777543,48470,754775]},{texure:"tail",frame:"49",colors:[4699647,1270751,2049680,2300245]},{texure:"tail",frame:"31",colors:[4699647,1270751,403517]},{texure:"tail",frame:"5",colors:[15753874,13775721,10233165]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"16",colors:[15615296,13052993,8393526,2954028]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"38",colors:[4384420,174248,99203]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"59",colors:[16760335,16391694,9175040]},{texure:"tail",frame:"37",colors:[8840703,6013176,33225]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[3728717,6009624,2849291,1336150]},{texure:"tail",frame:"18",colors:[16504530,13519295,10895045]},{texure:"tail",frame:"3",colors:[8777543,48470,754775]},{texure:"tail",frame:"48",colors:[13792901,10372996,6698111,3616875]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[16772020,16760745,16755884]},{texure:"tail",frame:"59",colors:[16645888,10288942,3728717]},{texure:"tail",frame:"59",colors:[16504530,15831223,13519295,10895045]},{texure:"tail",frame:"59",colors:[16711680,3997696,0]},{texure:"tail",frame:"59",colors:[15831223,13519295,10895045]},{texure:"tail",frame:"25",colors:[15219220,8982285,6489606]},{texure:"tail",frame:"59",colors:[16761600,15491338,10750524,7014472]},{texure:"tail",frame:"59",colors:[16711680,9765121,3997696,0]},{texure:"tail",frame:"59",colors:[16753920,16776960,32768,255,4915330]},{texure:"tail",frame:"59",colors:[16710055,16433683,16219681]},{texure:"tail",frame:"37",colors:[8840703,6013176,33225]},{texure:"tail",frame:"3",colors:[8840703,6013176,33225]},{texure:"tail",frame:"59",colors:[3728717,5551157,3641911]},{texure:"tail",frame:"59",colors:[16772020,16760745,16755884]},{texure:"tail",frame:"59",colors:[16645888,10288942,3728717]},{texure:"tail",frame:"59",colors:[16504530,15831223,13519295,10895045]},{texure:"tail",frame:"59",colors:[16711680,3997696,0]},{texure:"tail",frame:"59",colors:[15831223,13519295,10895045]},{texure:"tail",frame:"59",colors:[16753097,16337042,15075685]},{texure:"tail",frame:"59",colors:[16761600,15491338,10750524,7014472]},{texure:"tail",frame:"59",colors:[16711680,9765121,3997696,0]},{texure:"tail",frame:"59",colors:[16753920,16776960,32768,255,4915330]},{texure:"tail",frame:"59",colors:[16710055,16433683,16219681]},{texure:"tail",frame:"55",colors:[15219220,8982285,6489606]},{texure:"tail",frame:"59",colors:[16750529,16734296,14685260,10098275]},{texure:"tail",frame:"59",colors:[3728717,5551157,3641911]},{texure:"tail",frame:"59",colors:[16772020,16760745,16755884]},{texure:"tail",frame:"59",colors:[16645888,10288942,3728717]},{texure:"tail",frame:"59",colors:[16504530,15831223,13519295,10895045]},{texure:"tail",frame:"59",colors:[16711680,3997696,0]},{texure:"tail",frame:"59",colors:[15831223,13519295,10895045]},{texure:"tail",frame:"59",colors:[16753097,16337042,15075685]},{texure:"tail",frame:"59",colors:[16761600,15491338,10750524,7014472]},{texure:"tail",frame:"59",colors:[16711680,9765121,3997696,0]},{texure:"tail",frame:"59",colors:[16753920,16776960,32768,255,4915330]},{texure:"tail",frame:"59",colors:[16710055,16433683,16219681]},{texure:"tail",frame:"59",colors:[5152573,1986856,1645081]},{texure:"tail",frame:"59",colors:[16750529,16734296,14685260,10098275]},{texure:"tail",frame:"59",colors:[3728717,5551157,3641911]}];class k{static init(){this.emitter=new Phaser.Events.EventEmitter,this.currentSkin=m.getCurrentSkin(),this.unlockedSkins=m.getUnlockedSkins(),0===this.unlockedSkins.length&&(this.unlockedSkins=[0])}static unlockSkin(t){this.unlockedSkins.push(t);const e=m.getPlayerData();e.skins.unlocked=this.unlockedSkins,m.savePlayerData(e)}static changeSkin(t){this.currentSkin=t;const e=m.getPlayerData();e.skins.current=t,m.savePlayerData(e),this.emitter.emit("skin-changed",t)}static getCurrentSkinColors(){return f[this.currentSkin].colors}static getCurrentSkin(){return this.currentSkin}static getUnlockedSkins(){return this.unlockedSkins}}k.unlockedSkins=[];class v{static HexToRRB(t){return Phaser.Display.Color.IntegerToRGB(t)}static RGBtoHex(t){return(t.r<<16)+(t.g<<8)+t.b}static Shade(t,e){return t.r=Math.floor(t.r*(1-e)),t.g=Math.floor(t.g*(1-e)),t.b=Math.floor(t.b*(1-e)),t}}const P=3e-5;class C extends Phaser.Physics.Arcade.Sprite{constructor(t){super(t.scene,t.x,t.y,t.texture,t.frame),this.onSkinChanged=t=>{this.setFrame(t),this.specialParticle.destroy(),this.smokeParticle.destroy(),this.addSmokeParticle(),this.addSpecialParticle(),this.combo<3&&this.smokeParticle.stop(),this.combo<4&&this.specialParticle.stop()},this._scene=t.scene,this.addSmokeParticle(),this.addSpecialParticle(),this.addFireDustParticle(),this.resetCombo(),t.scene.add.existing(this),t.scene.physics.add.existing(this),k.emitter.on("skin-changed",this.onSkinChanged)}shoot(t){this.setVelocity(t.x,t.y),this.setBounce(.7),this.setGravityY(2e3),this._scene.releaseSound.play(),this.combo>3&&this._scene.comboShootSound.play()}getCombo(){return this.combo}increaseCombo(){if(this.combo++,3===this.combo&&(this.smokeParticle.destroy(),this.addSmokeParticle()),this.combo>=4){4===this.combo&&(this.smokeParticle.destroy(),this.addSmokeParticle(),this.fireDustParticle.start(),this.specialParticle.start()),m.getPlayerData().settings.vibration&&window.navigator.vibrate(300);const t=v.HexToRRB(k.getCurrentSkinColors()[0]);this._scene.cameras.main.flash(200,t.r,t.g,t.b),this._scene.cameras.main.shake(200,.003)}}resetCombo(){this.combo=0,this.specialParticle.stop(),this.smokeParticle.stop()}addSpecialParticle(){this.specialParticle=this._scene.add.particles(0,0,f[k.getCurrentSkin()].texure,{color:k.getCurrentSkinColors(),colorEase:"quad.out",lifespan:700,angle:{min:0,max:360},rotate:{min:0,max:360},scale:{start:.35,end:0},speed:{min:10,max:30},frequency:40,frame:f[k.getCurrentSkin()].frame}),this.specialParticle.startFollow(this),this.specialParticle.setDepth(-4)}addFireDustParticle(){this.fireDustParticle=this._scene.add.particles(0,0,"circle",{color:[16773923,16763395,16733187],alpha:{start:1,end:0,ease:"Quad.in"},angle:{min:-135,max:-45},colorEase:"quad.out",lifespan:600,scale:{start:.3,end:.5,ease:"Quad.in"},speed:{min:100,max:150},duration:500,frequency:80}),this.fireDustParticle.stop(),this.fireDustParticle.startFollow(this,0,-20)}addSmokeParticle(){const t=k.getCurrentSkinColors()[2],e=v.HexToRRB(t),s=3===this.combo?[16777215,15790320,8947848]:[v.RGBtoHex(v.Shade(e,.4)),v.RGBtoHex(v.Shade(e,.5)),v.RGBtoHex(v.Shade(e,.6))];this.smokeParticle=this._scene.add.particles(0,0,"circle",{color:s,alpha:{start:.8,end:0,ease:"sine.out"},colorEase:"quad.out",lifespan:1e3,angle:{min:0,max:360},rotate:{min:0,max:360},scale:{start:.6,end:.8,ease:"quad.out"},speed:{min:50,max:60},frequency:60}),this.smokeParticle.startFollow(this),this.smokeParticle.setDepth(-5)}update(t,e){if(this.body){const t=this.body.velocity.x;t>10?this.rotation+=P*Math.max(600,this.body.velocity.length())*e:t<-10&&(this.rotation-=P*Math.max(600,this.body.velocity.length())*e)}}}var w;class B{constructor(t){this.init(),this.createCurrentScoreText(t),this.createBestScoreText(t),this.createHighScoreText(t)}init(){B.curScore=0,B.highScore=m.getHighScore()}createCurrentScoreText(t){B.curScoreText=t.add.bitmapText(300,.17*t.scale.height,"objet","0",180).setTint(12698049).setDepth(-3).setOrigin(.5)}createBestScoreText(t){B.bestScoreText=t.add.bitmapText(300,.02*t.scale.height,"objet","Best Score",40).setTint(16485157).setDepth(-3).setOrigin(.5).setAlpha(0)}createHighScoreText(t){B.highScoreText=t.add.bitmapText(300,.07*t.scale.height,"objet",m.getHighScore().toString(),90).setTint(16485157).setDepth(-3).setOrigin(.5).setAlpha(0)}}w=B,B.updateScore=t=>{if(w.curScore=t,w.curScore>w.highScore){w.highScore=w.curScore;const t=m.getPlayerData();t.highScore=w.curScore,m.savePlayerData(t),w.highScoreText.setText(w.highScore.toString())}w.curScoreText.setText(w.curScore.toString())};class T{static init(t){T.scene=t,T.popUpText=t.add.bitmapText(0,0,"objet","",40).setTint(16485157).setDepth(-3).setOrigin(.5).setAlpha(0)}static create(t){this.popUpQueue.push(t)}static playTweenQueue(t,e){const s=this.popUpQueue.shift();s&&(this.popUpText.x=t,this.popUpText.y=e,this.popUpText.setText(s.text).setTint(s.color),this.scene.add.tween({targets:this.popUpText,alpha:{value:1,duration:250,yoyo:!0},y:{value:e-20,duration:300,ease:"Back.out"},onComplete:()=>{this.playTweenQueue(t,e)}}))}}T.popUpQueue=[];class D extends Phaser.GameObjects.NineSlice{constructor(t){super(t.scene,t.x,t.y,"mini-wall",0,25,309,10,10,100,100),this.ball=t.ball,this.scene.add.existing(this).setScale(.65),this.scene.physics.add.existing(this,!1),this.body&&(this.physic=this.body,this.physic.immovable=!0),this.scene.physics.add.collider(this.ball,this,(()=>{this.scene.bounceCount++}))}setActive(t){return this.physic.enable=t,this}}class A extends Phaser.Physics.Arcade.Sprite{constructor(t){super(t.scene,t.x,t.y,"bouncer"),this.ball=t.ball,this.scene.add.existing(this).setScale(.65),this.scene.physics.add.existing(this,!1),this.body&&(this.body.immovable=!0),this.scene.physics.add.collider(this.ball,this,(()=>{this.scene.bounceCount++,this.ball.body&&(this.ball.setVelocity(2*this.ball.body.velocity.x,2*this.ball.body.velocity.y),this.scene.add.tween({targets:this,scale:1.1*this.scale,duration:50,yoyo:!0,ease:"Quad.out"}))}))}setActive(t){return this.body&&(this.body.enable=t),this}}const E=[[-Math.PI/2,Math.PI/2]];class O extends Phaser.GameObjects.Container{constructor(t){super(t.scene,t.x,t.y),t.scene.add.existing(this),this.ball=t.ball,this.createSprite(t.scene),this.createCollider(t.scene)}createSprite(t){this.shieldSprite=t.add.sprite(0,0,"shield").setScale(1),this.radius=this.shieldSprite.displayWidth/2-15,this.add(this.shieldSprite)}createCollider(t){for(let e=0;e<E.length;e++){const s=(E[e][1]-E[e][0])/11;for(let a=0;a<12;a++){const i=this.radius*Math.cos(s*a+E[e][0]),r=this.radius*Math.sin(s*a+E[e][0]),o=t.physics.add.sprite(i,r,"").setCircle(10).setOffset(10,10).setAlpha(0);this.add(o),t.physics.add.existing(o),o.body.setImmovable(!0).setBounce(0).moves=!1,t.physics.add.collider(o,this.ball)}}}update(t,e){this.rotation+=.0015*e}}class G extends i().Scene{constructor(){super("game"),this.math=new(i().Math.RandomDataGenerator),this.baskets=[],this.walls=[],this.pointSounds=[],this.handleBallTouch=t=>{if(t!==this.targetBasket)return void(this.bounceCount=0);this.dotLine.clearNormalLine(),this.generateNextBasket(t),this.draggingZone.y=this.targetBasket.y,this.deadZone.y=t.y+450,this.walls.forEach((t=>t.y=this.targetBasket.y)),this.ball.increaseCombo();const e=this.ball.getCombo();e>=4&&(4===e?this.comboStartSound.play():this.comboHitSound.play());const s=Math.min(e,10)*(this.bounceCount>0?2:1);this.curScore+=s,this.pointSounds[Math.min(e,10)-1].play(),B.updateScore(this.curScore),this.bounceCount>0&&T.create({text:"Bounce"+(this.bounceCount>1?" x"+this.bounceCount:""),color:3187455}),this.previousCombo>0&&e>this.previousCombo&&T.create({text:"Perfect"+(e-1>1?" x"+(e-1):""),color:16485157}),this.previousCombo=e,T.create({text:`+${s}`,color:13652778}),T.playTweenQueue(t.x,t.y-50),this.bounceCount=0}}init(){this.dotLine.init()}create(){this.initializeVariables(),this.createBall(),this.createDraggingZone(),this.createDeadZone(),this.createWalls(),this.createBaskets(),this.createObstacles(),this.configureCamera()}initializeVariables(){this.curScore=0,this.bounceCount=0,this.previousCombo=0,this.camera=this.cameras.main,this.dotLine.init(),this.releaseSound=this.sound.add("release"),this.gameOverSound=this.sound.add("game-over"),this.gameOverSound.addMarker({name:"a",start:.4}),this.wallHitSound=this.sound.add("wall-hit"),this.starSound=this.sound.add("star"),this.comboHitSound=this.sound.add("combo-hit"),this.comboShootSound=this.sound.add("combo-shoot"),this.comboStartSound=this.sound.add("combo-start");for(let t=1;t<=10;t++)this.pointSounds[t-1]=this.sound.add(t.toString());this.sound.setMute(!m.getPlayerData().settings.sound),k.init(),T.init(this)}createBall(){this.ball=new C({scene:this,x:150,y:.25*this.scale.height,texture:"ball",frame:k.getCurrentSkin()}).setDepth(1).setName("Ball").setCircle(100).setScale(.32).setDepth(0).setGravityY(1200).setFriction(0)}createDraggingZone(){this.draggingZone=this.add.rectangle(300,.5*this.scale.height,r,this.scale.height,0,0).setInteractive({draggable:!0})}createDeadZone(){this.deadZone=this.add.rectangle(300,this.scale.height,r,.2*this.scale.height,0,0),this.physics.add.existing(this.deadZone),this.physics.add.overlap(this.deadZone,this.ball,(()=>{this.gameOverSound.play("a"),u.getCurrentState()===h.PLAYING&&(0===this.curScore?(this.ball.setPosition(150,.25*this.scale.height).setVelocity(0).setRotation(0),this.add.tween({targets:this.baskets[0],rotation:0,duration:300,ease:"Back.out"})):(u.updateGameState(h.GAME_OVER,this),this.camera.stopFollow()))}))}createWalls(){const t=this.add.image(0,0,"e4").setAlpha(0).setScale(.5),e=[{x:0,y:.5*this.scale.height,origin:{x:1,y:.5}},{x:r,y:.5*this.scale.height,origin:{x:0,y:.5}}];this.walls=e.map((t=>this.add.rectangle(t.x,t.y,50,3*this.scale.height,13224393).setOrigin(t.origin.x,t.origin.y))),this.walls.forEach((e=>{this.physics.add.existing(e),e.body.setImmovable(!0).moves=!1,this.physics.add.collider(this.ball,e,(()=>{this.wallHitSound.play(),t.x=this.ball.x,t.y=this.ball.y,t.setTint(k.getCurrentSkinColors()[0]).setAlpha(0).setScale(.5,.1).setFlipX(t.x>300),this.ball.body&&this.ball.setVelocity(1.1*this.ball.body.velocity.x,1.1*this.ball.body.velocity.y),this.add.tween({targets:t,alpha:{value:1,duration:100,yoyo:!0},scaleY:{value:2,duration:200},easing:"Quad.out",onComplete:()=>{t.setAlpha(0)}}),this.bounceCount++}))}))}createBaskets(){this.baskets[0]=new y(this,150,400,this.ball),this.baskets[1]=new y(this,480,350,this.ball),this.ball.y=this.baskets[0].y,this.baskets.forEach((t=>{t.emitter.on("onHasBall",this.handleBallTouch),this.add.existing(t)})),this.targetBasket=this.baskets[1]}createObstacles(){this.miniWall=new D({scene:this,x:300,y:100,ball:this.ball}).setActive(!1).setScale(0),this.bouncer=new A({scene:this,x:300,y:100,ball:this.ball}).setActive(!1).setScale(0).setCircle(100),this.shield=new O({scene:this,x:800,y:500,ball:this.ball})}configureCamera(){this.input.dragDistanceThreshold=10,this.camera.startFollow(this.ball,!1,0,.01,-150,this.scale.height/4)}generateNextBasket(t){const e=this.baskets.indexOf(t),s=this.baskets[1-e];this.targetBasket=s,this.targetBasket.y=this.math.integerInRange(t.y-450,t.y-150),0===e?(this.targetBasket.x=this.math.integerInRange(360,480),this.targetBasket.rotation=this.math.realInRange(-.5,0)):(this.targetBasket.x=this.math.integerInRange(120,240),this.targetBasket.rotation=this.math.realInRange(0,.5)),l.Percent(20)&&this.targetBasket.createStar(this),this.targetBasket.scale=.01,this.add.tween({targets:this.targetBasket,scale:1,duration:300,ease:"Back.out"}),this.generateObstacles()}generateObstacles(){this.miniWall.setActive(!1).setScale(0),this.bouncer.setActive(!1).setScale(0),this.shield.setScale(.001).setPosition(800,0),l.Percent(10)?this.targetBasket.setMoveable(!0):l.Percent(10)?(this.miniWall.setActive(!0).y=this.targetBasket.y-50,this.add.tween({targets:this.miniWall,scale:.65,duration:300,ease:"Back.out"}),this.miniWall.x=this.targetBasket.x+(l.Percent(50)?100:-100)):l.Percent(10)?(this.bouncer.setActive(!0).y=this.targetBasket.y-200,this.bouncer.x=this.targetBasket.x,this.add.tween({targets:this.bouncer,scale:.35,duration:300,ease:"Back.out"}),this.targetBasket.rotation=0):l.Percent(10)&&(this.shield.setPosition(this.targetBasket.x,this.targetBasket.y),this.add.tween({targets:this.shield,scale:.65,duration:300,ease:"Back.out"}),this.targetBasket.rotation=0)}update(t,e){this.ball.update(t,e),this.baskets[0].update(),this.baskets[1].update(),this.shield.update(t,e)}}class I extends Phaser.Plugins.ScenePlugin{constructor(t,e,s){super(t,e,s)}init(){this.scene&&(this.trajectoryLineGraphics=this.scene.add.graphics(),this.normalLineGraphics=this.scene.add.graphics())}drawLine(t,e,s){this.normalLineGraphics.clear();const a=s||10;for(let s=0;s<a;s++){const i=(e.x-t.x)/a*s+t.x,r=(e.y-t.y)/a*s+t.y;this.normalLineGraphics.fillStyle(13224393,1),this.normalLineGraphics.setDepth(-4),this.normalLineGraphics.fillCircle(i,r,7)}}drawTrajectoryLine(t,e,s,a){this.trajectoryLineGraphics.clear();for(let i=0;i<=10;i++){const o=i/20;let l=t.x+e.x*o;const h=t.y+e.y*o+s*o*o/2;l<0?l=-l:l>r&&(l=r-(l-r)),this.trajectoryLineGraphics.fillStyle(15902267,a),this.trajectoryLineGraphics.setDepth(-2),this.trajectoryLineGraphics.fillCircle(l,h,15/(i+1)+5)}}clearTrajectoryLine(){this.trajectoryLineGraphics.clear()}clearNormalLine(){this.normalLineGraphics.clear()}}class M extends Phaser.GameObjects.Image{constructor(t){super(t.scene,t.x,t.y,t.texture,t.frame),this.setInteractive(),this.pointerDownCallback=t.pointerDownCallback,this.pointerUpCallback=t.pointerUpCallback,this.on("pointerdown",this.onPointerDown),this.on("pointerup",this.onPointerUp),this.on("pointerout",this.onPointerOut),this.defaultScale=t.scale,this.setScale(t.scale),this.isDown=!1,t.scene.add.existing(this)}onPointerDown(){this.setScale(.9*this.defaultScale),this.isDown=!0,void 0!==this.pointerDownCallback&&this.pointerDownCallback()}onPointerUp(){this.setScale(this.defaultScale),this.isDown&&(this.isDown=!1,void 0!==this.pointerUpCallback&&this.pointerUpCallback())}onPointerOut(){this.setScale(this.defaultScale)}}class U extends Phaser.Scene{constructor(){super("main-menu"),this.handlePauseButtonClick=()=>{u.getCurrentState()===h.PLAYING&&u.updateGameState(h.PAUSE,this)},this.handleCustomizeButtonClick=()=>{u.updateGameState(h.CUSTOMIZE,this)},this.handleSettingsButtonClick=()=>{u.updateGameState(h.SETTINGS,this)},this.onGameStateChanged=t=>{t===h.GAME_OVER&&this.tweens.add({targets:this.pauseBtn,alpha:{value:0,duration:500},ease:"Quad.out"})},u.emitter.on("game-state-changed",this.onGameStateChanged)}create(){this.createLogo(),this.createHelpAnimation(),this.createPauseButton(),this.createSettingsButton(),this.createCustomizeButton(),this.setupInputEvents(),new p(this)}createLogo(){this.logo=this.add.image(300,.25*-this.scale.height,"logo").setScale(.85),this.tweens.add({targets:this.logo,y:{value:.25*this.scale.height,duration:500},ease:"Quad.out"})}createHelpAnimation(){this.help=this.add.sprite(120,.88*this.scale.height,"help").setScale(.6),this.help.anims.create({key:"idle",frames:this.anims.generateFrameNames("help",{start:0,end:23}),frameRate:32,repeat:-1}),this.help.play("idle")}createPauseButton(){this.pauseBtn=new M({scene:this,x:36,y:.035*this.scale.height,texture:"pause-btn",scale:.25,pointerUpCallback:this.handlePauseButtonClick}).setAlpha(0)}createSettingsButton(){this.settingsBtn=new M({scene:this,x:36,y:.035*this.scale.height,texture:"settings-mainmenu-btn",scale:1,pointerDownCallback:this.handleSettingsButtonClick})}createCustomizeButton(){this.customizeBtn=new M({scene:this,x:420,y:.85*this.scale.height,texture:"customize-mainmenu-btn",scale:.4,pointerDownCallback:this.handleCustomizeButtonClick})}setupInputEvents(){this.input.on("pointerdown",(()=>{u.getCurrentState()===h.READY&&(u.updateGameState(h.PLAYING,this),this.handleGameStart())}))}handleGameStart(){this.tweens.add({targets:[this.logo,this.help,this.customizeBtn,this.settingsBtn],alpha:{value:0,duration:500},ease:"Quad.out"}),this.tweens.add({targets:this.pauseBtn,alpha:{value:1,duration:500},ease:"Quad.out"}),this.help.stop()}}class R extends Phaser.Scene{constructor(){super("result"),this.onGameStateChanged=t=>{t===h.GAME_OVER&&this.showResult()},u.init(),u.emitter.on("game-state-changed",this.onGameStateChanged)}create(){this.score=new B(this),this.shareBtn=new M({scene:this,x:.28*r,y:.8*this.scale.height,texture:"share-btn",scale:.4}).setScale(0),this.resetBtn=new M({scene:this,x:300,y:.8*this.scale.height,texture:"reset-btn",scale:.4,pointerUpCallback:()=>{u.updateGameState(h.READY,this)}}).setScale(0),this.settingsBtn=new M({scene:this,x:432,y:.8*this.scale.height,texture:"settings-btn",scale:.4,pointerUpCallback:()=>{u.updateGameState(h.SETTINGS,this)}}).setScale(0)}showResult(){this.resetBtn.setScale(0),this.settingsBtn.setScale(0),this.shareBtn.setScale(0),this.add.tween({targets:[this.resetBtn,this.settingsBtn,this.shareBtn],scale:{value:.4,duration:300},ease:"Quad.out"}),this.add.tween({targets:[B.highScoreText,B.bestScoreText],alpha:{value:1,duration:500},ease:"Quad.out"})}}class L extends Phaser.Scene{constructor(){super("pause")}create(){new M({scene:this,x:300,y:.35*this.scale.height,texture:"mainmenu-btn",scale:.4,pointerUpCallback:()=>{u.updateGameState(h.READY,this)}}),new M({scene:this,x:300,y:.45*this.scale.height,texture:"customize-btn",scale:.4,pointerUpCallback:()=>{u.updateGameState(h.CUSTOMIZE,this)}}),new M({scene:this,x:300,y:.55*this.scale.height,texture:"settings-pause-btn",scale:.4,pointerUpCallback:()=>{u.updateGameState(h.SETTINGS,this)}}),new M({scene:this,x:300,y:.65*this.scale.height,texture:"resume-btn",scale:.4,pointerUpCallback:()=>{u.updateGameState(h.PLAYING,this)}})}}class V extends Phaser.Scene{constructor(){super("customize"),this.skins=[]}create(){this.createBackButton(),this.createSkinsPanel(),this.add.image(300,20,"top-ornament").setDepth(-2),this.add.image(300,200,"shop-line").setScale(1.15,1).setTint(9145227),this.add.rectangle(300,100,r,200,15066597).setDepth(-3),this.selectedCirc=this.add.ellipse(200,200,140,140,16767293).setDepth(-4)}createSkinsPanel(){this.skinsPanel=this.rexUI.add.scrollablePanel({x:300,y:this.scale.height/2+100,width:r,height:this.scale.height-200,background:this.rexUI.add.roundRectangle(0,0,2,2,10,15066597).setDepth(-5),scrollMode:"v",panel:{child:this.createGrid(this)},mouseWheelScroller:{focus:!1,speed:.5},space:{left:10,right:10}}).layout();const t=this.skinsPanel;this.tweens.addCounter({from:this.skinsPanel.childOY,to:this.skinsPanel.childOY+this.skinsPanel.centerY-this.skins[k.getCurrentSkin()].y,duration:500,ease:"Quad.out",onUpdate:function(e){t.childOY=e.getValue()}}),this.skinsPanel.setChildrenInteractive({}).on("child.click",(t=>{t.pointerDownCallback&&t.pointerDownCallback()}))}createGrid(t){const e=k.getUnlockedSkins();this.skins=[];const s=t.rexUI.add.fixWidthSizer({space:{left:3,right:3,top:20,bottom:20,item:16,line:16},align:"center"});for(let t=0;t<116;t++){let a;-1===e.indexOf(t)?(a=new M({scene:this,x:0,y:0,texture:"item",scale:.56,pointerDownCallback:()=>{-1===e.indexOf(t)?p.getCurrentStar()>100&&(p.updateStar(p.getCurrentStar()-100),k.unlockSkin(t),a.setTexture("ball",t)):(console.log("a"),k.changeSkin(t),this.selectedCirc.x=this.skins[t].x,this.selectedCirc.y=this.skins[t].y)}}),this.skins.push(a)):this.skins.push(a=new M({scene:this,x:0,y:0,texture:"ball",frame:t,scale:.56,pointerDownCallback:()=>{k.changeSkin(t),this.selectedCirc.x=this.skins[t].x,this.selectedCirc.y=this.skins[t].y}})),s.add(a)}return s}createBackButton(){new M({scene:this,x:36,y:.035*this.scale.height,texture:"back-btn",scale:.3,pointerUpCallback:()=>{u.getPreviousState()!==h.READY&&u.getPreviousState()!==h.PAUSE||u.updateGameState(u.getPreviousState(),this)}})}update(){this.selectedCirc.x=this.skins[k.getCurrentSkin()].x,this.selectedCirc.y=this.skins[k.getCurrentSkin()].y}}class N extends M{constructor(t){super({scene:t.scene,x:t.x,y:t.y,texture:t.textureOn,frame:t.frameOn,scale:t.scale,pointerUpCallback:t.pointerUpCallback,pointerDownCallback:t.pointerDownCallback}),this.isOn=!0,this.s=t}setActive(t){return this.isOn=t,t?this.setTexture(this.s.textureOn,this.s.frameOn):this.setTexture(this.s.textureOff,this.s.frameOff),this}toggle(){this.setActive(!this.isOn)}getActive(){return this.isOn}}class Y extends Phaser.Scene{constructor(){super("settings")}create(){this.createBackButton(),this.createTexts(),this.createSwitchButtons(),this.createClearDataButton(),this.createUnlimitedButton()}createBackButton(){new M({scene:this,x:36,y:.035*this.scale.height,texture:"back-btn",scale:.3,pointerUpCallback:()=>{const t=u.getPreviousState();t!==h.READY&&t!==h.PAUSE&&t!==h.GAME_OVER||u.updateGameState(t,this)}})}createTexts(){this.addText(60,.3*this.scale.height,"SOUNDS"),this.addText(60,.4*this.scale.height,"VIBRATION"),this.addText(60,.5*this.scale.height,"NIGHT MODE")}addText(t,e,s){this.add.bitmapText(t,e,"objet",s,50).setTint(12698049).setDepth(-3)}createClearDataButton(){new M({scene:this,x:.3*this.scale.height,y:.7*this.scale.height,texture:"cleardata-btn",scale:.5,pointerUpCallback:()=>{d.deleteAll()}})}createUnlimitedButton(){new M({scene:this,x:.3*this.scale.height,y:.8*this.scale.height,texture:"unlimited-btn",scale:.5,pointerUpCallback:()=>{p.updateStar(99999)}})}createSwitchButtons(){this.soundBtn=this.createSwitchButton(420,.3*this.scale.height,n.SOUND).setActive(m.getPlayerData().settings.sound),this.vibrationBtn=this.createSwitchButton(420,.4*this.scale.height,n.VIBRATION).setActive(m.getPlayerData().settings.vibration),this.nightModeBtn=this.createSwitchButton(420,.5*this.scale.height,n.NIGHT_MODE).setActive(m.getPlayerData().settings.nightMode)}createSwitchButton(t,e,s){const a=new N({scene:this,x:t,y:e,textureOn:"rounded-btn",frameOn:0,textureOff:"rounded-btn",frameOff:1,scale:.5,pointerUpCallback:()=>{a.toggle(),m.setSettings(s,a.getActive())}}).setOrigin(0);return a}}var H=s(268);const j={type:i().WEBGL,physics:{default:"arcade",arcade:{gravity:{y:0}}},scale:{width:r,height:window.innerHeight>window.innerWidth?r*window.innerHeight/window.innerWidth:1e3,parent:"phaser-game",mode:i().Scale.FIT,autoCenter:i().Scale.CENTER_BOTH},plugins:{scene:[{key:"DotLinePlugin",plugin:I,start:!0,mapping:"dotLine"},{key:"rexUI",plugin:H.Z,mapping:"rexUI"}]},roundPixels:!0,backgroundColor:"0xe5e5e5",scene:[o,G,R,U,V,Y,L]};new(i().Game)(j)}},s={};function a(t){var i=s[t];if(void 0!==i)return i.exports;var r=s[t]={exports:{}};return e[t].call(r.exports,r,r.exports,a),r.exports}a.m=e,t=[],a.O=(e,s,i,r)=>{if(!s){var o=1/0;for(c=0;c<t.length;c++){for(var[s,i,r]=t[c],l=!0,h=0;h<s.length;h++)(!1&r||o>=r)&&Object.keys(a.O).every((t=>a.O[t](s[h])))?s.splice(h--,1):(l=!1,r<o&&(o=r));if(l){t.splice(c--,1);var n=i();void 0!==n&&(e=n)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[s,i,r]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};a.O.j=e=>0===t[e];var e=(e,s)=>{var i,r,[o,l,h]=s,n=0;if(o.some((e=>0!==t[e]))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(h)var c=h(a)}for(e&&e(s);n<o.length;n++)r=o[n],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(c)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var i=a.O(void 0,[216],(()=>a(246)));i=a.O(i)})();